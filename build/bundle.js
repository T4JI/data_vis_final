var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function i(t){return"function"==typeof t}function o(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function a(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function s(t){t.parentNode&&t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function c(){return t=" ",document.createTextNode(t);var t}function f(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function p(t,n,e,r){null==e?t.style.removeProperty(n):t.style.setProperty(n,e,r?"important":"")}let d;function g(t){d=t}function y(){if(!d)throw new Error("Function called outside component initialization");return d}function v(t){y().$$.on_mount.push(t)}function m(t){y().$$.after_update.push(t)}function w(){const t=y();return(n,e,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[n];if(i){const o=function(t,n,{bubbles:e=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e,r,n),i}(n,e,{cancelable:r});return i.slice().forEach((n=>{n.call(t,o)})),!o.defaultPrevented}return!0}}const _=[],b=[];let x=[];const $=[],M=Promise.resolve();let A=!1;function E(t){x.push(t)}const N=new Set;let k=0;function S(){if(0!==k)return;const t=d;do{try{for(;k<_.length;){const t=_[k];k++,g(t),C(t.$$)}}catch(t){throw _.length=0,k=0,t}for(g(null),_.length=0,k=0;b.length;)b.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];N.has(n)||(N.add(n),n())}x.length=0}while(_.length);for(;$.length;)$.pop()();A=!1,N.clear(),g(t)}function C(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(E)}}const T=new Set;let z;function P(t,n){t&&t.i&&(T.delete(t),t.i(n))}function R(t,n,e,r){if(t&&t.o){if(T.has(t))return;T.add(t),z.c.push((()=>{T.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}else r&&r()}function j(t){t&&t.c()}function O(t,e,o,a){const{fragment:u,after_update:s}=t.$$;u&&u.m(e,o),a||E((()=>{const e=t.$$.on_mount.map(n).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),s.forEach(E)}function q(t,n){const e=t.$$;null!==e.fragment&&(!function(t){const n=[],e=[];x.forEach((r=>-1===t.indexOf(r)?n.push(r):e.push(r))),e.forEach((t=>t())),x=n}(e.after_update),r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function L(t,n){-1===t.$$.dirty[0]&&(_.push(t),A||(A=!0,M.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function D(n,i,o,a,u,l,c,f=[-1]){const h=d;g(n);const p=n.$$={fragment:null,ctx:[],props:l,update:t,not_equal:u,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(h?h.$$.context:[])),callbacks:e(),dirty:f,skip_bound:!1,root:i.target||h.$$.root};c&&c(p.root);let y=!1;if(p.ctx=o?o(n,i.props||{},((t,e,...r)=>{const i=r.length?r[0]:e;return p.ctx&&u(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),y&&L(n,t)),e})):[],p.update(),y=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(s)}else p.fragment&&p.fragment.c();i.intro&&P(n.$$.fragment),O(n,i.target,i.anchor,i.customElement),S()}g(h)}class F{$destroy(){q(this,1),this.$destroy=t}$on(n,e){if(!i(e))return t;const r=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return r.push(e),()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function H(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function B(t,n){return null==t||null==n?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function X(t){let n,e,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==n(r,r))return o;do{const n=i+o>>>1;e(t[n],r)<0?i=n+1:o=n}while(i<o)}return i}return 2!==t.length?(n=H,e=(n,e)=>H(t(n),e),r=(n,e)=>t(n)-e):(n=t===H||t===B?t:I,e=t,r=t),{left:i,center:function(t,n,e=0,o=t.length){const a=i(t,n,e,o-1);return a>e&&r(t[a-1],n)>-r(t[a],n)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==n(r,r))return o;do{const n=i+o>>>1;e(t[n],r)<=0?i=n+1:o=n}while(i<o)}return i}}}function I(){return 0}const V=X(H).right;X((function(t){return null===t?NaN:+t})).center;var Y=V;class U{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const i=n[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(n[e++]=a),t=o}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(n=o,e=t[--i],o=n+e,r=e-(o-n),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(e=2*r,n=o+e,e==n-o&&(o=n))}return o}}class W extends Map{constructor(t,n=G){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const[n,e]of t)this.set(n,e)}get(t){return super.get(Z(this,t))}has(t){return super.has(Z(this,t))}set(t,n){return super.set(function({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}(this,t),n)}delete(t){return super.delete(function({_intern:t,_key:n},e){const r=n(e);t.has(r)&&(e=t.get(r),t.delete(r));return e}(this,t))}}function Z({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function G(t){return null!==t&&"object"==typeof t?t.valueOf():t}const J=Math.sqrt(50),K=Math.sqrt(10),Q=Math.sqrt(2);function tt(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=J?10:o>=K?5:o>=Q?2:1;let u,s,l;return i<0?(l=Math.pow(10,-i)/a,u=Math.round(t*l),s=Math.round(n*l),u/l<t&&++u,s/l>n&&--s,l=-l):(l=Math.pow(10,i)*a,u=Math.round(t/l),s=Math.round(n/l),u*l<t&&++u,s*l>n&&--s),s<u&&.5<=e&&e<2?tt(t,n,2*e):[u,s,l]}function nt(t,n,e){if(!((e=+e)>0))return[];if((t=+t)===(n=+n))return[t];const r=n<t,[i,o,a]=r?tt(n,t,e):tt(t,n,e);if(!(o>=i))return[];const u=o-i+1,s=new Array(u);if(r)if(a<0)for(let t=0;t<u;++t)s[t]=(o-t)/-a;else for(let t=0;t<u;++t)s[t]=(o-t)*a;else if(a<0)for(let t=0;t<u;++t)s[t]=(i+t)/-a;else for(let t=0;t<u;++t)s[t]=(i+t)*a;return s}function et(t,n,e){return tt(t=+t,n=+n,e=+e)[2]}function rt(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}function it(t){return t}var ot=1e-6;function at(t){return"translate("+t+",0)"}function ut(t){return"translate(0,"+t+")"}function st(t){return n=>+t(n)}function lt(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function ct(){return!this.__axis}function ft(t,n){var e=[],r=null,i=null,o=6,a=6,u=3,s="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,l=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",f=1===t||3===t?at:ut;function h(h){var p=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,d=null==i?n.tickFormat?n.tickFormat.apply(n,e):it:i,g=Math.max(o,0)+u,y=n.range(),v=+y[0]+s,m=+y[y.length-1]+s,w=(n.bandwidth?lt:st)(n.copy(),s),_=h.selection?h.selection():h,b=_.selectAll(".domain").data([null]),x=_.selectAll(".tick").data(p,n).order(),$=x.exit(),M=x.enter().append("g").attr("class","tick"),A=x.select("line"),E=x.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(M),A=A.merge(M.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),E=E.merge(M.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==_&&(b=b.transition(h),x=x.transition(h),A=A.transition(h),E=E.transition(h),$=$.transition(h).attr("opacity",ot).attr("transform",(function(t){return isFinite(t=w(t))?f(t+s):this.getAttribute("transform")})),M.attr("opacity",ot).attr("transform",(function(t){var n=this.parentNode.__axis;return f((n&&isFinite(n=n(t))?n:w(t))+s)}))),$.remove(),b.attr("d",4===t||2===t?a?"M"+l*a+","+v+"H"+s+"V"+m+"H"+l*a:"M"+s+","+v+"V"+m:a?"M"+v+","+l*a+"V"+s+"H"+m+"V"+l*a:"M"+v+","+s+"H"+m),x.attr("opacity",1).attr("transform",(function(t){return f(w(t)+s)})),A.attr(c+"2",l*o),E.attr(c,l*g).text(d),_.filter(ct).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),_.each((function(){this.__axis=w}))}return h.scale=function(t){return arguments.length?(n=t,h):n},h.ticks=function(){return e=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(e=null==t?[]:Array.from(t),h):e.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(u=+t,h):u},h.offset=function(t){return arguments.length?(s=+t,h):s},h}var ht={value:()=>{}};function pt(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new dt(r)}function dt(t){this._=t}function gt(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function yt(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=ht,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}dt.prototype=pt.prototype={constructor:dt,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))),a=-1,u=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<u;)if(e=(t=o[a]).type)i[e]=yt(i[e],t.name,n);else if(null==n)for(e in i)i[e]=yt(i[e],t.name,null);return this}for(;++a<u;)if((e=(t=o[a]).type)&&(e=gt(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new dt(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var vt="http://www.w3.org/1999/xhtml",mt={svg:"http://www.w3.org/2000/svg",xhtml:vt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wt(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),mt.hasOwnProperty(n)?{space:mt[n],local:t}:t}function _t(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===vt&&n.documentElement.namespaceURI===vt?n.createElement(t):n.createElementNS(e,t)}}function bt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xt(t){var n=wt(t);return(n.local?bt:_t)(n)}function $t(){}function Mt(t){return null==t?$t:function(){return this.querySelector(t)}}function At(){return[]}function Et(t){return null==t?At:function(){return this.querySelectorAll(t)}}function Nt(t){return function(){return null==(n=t.apply(this,arguments))?[]:Array.isArray(n)?n:Array.from(n);var n}}function kt(t){return function(){return this.matches(t)}}function St(t){return function(n){return n.matches(t)}}var Ct=Array.prototype.find;function Tt(){return this.firstElementChild}var zt=Array.prototype.filter;function Pt(){return Array.from(this.children)}function Rt(t){return new Array(t.length)}function jt(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function Ot(t,n,e,r,i,o){for(var a,u=0,s=n.length,l=o.length;u<l;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new jt(t,o[u]);for(;u<s;++u)(a=n[u])&&(i[u]=a)}function qt(t,n,e,r,i,o,a){var u,s,l,c=new Map,f=n.length,h=o.length,p=new Array(f);for(u=0;u<f;++u)(s=n[u])&&(p[u]=l=a.call(s,s.__data__,u,n)+"",c.has(l)?i[u]=s:c.set(l,s));for(u=0;u<h;++u)l=a.call(t,o[u],u,o)+"",(s=c.get(l))?(r[u]=s,s.__data__=o[u],c.delete(l)):e[u]=new jt(t,o[u]);for(u=0;u<f;++u)(s=n[u])&&c.get(p[u])===s&&(i[u]=s)}function Lt(t){return t.__data__}function Dt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Ft(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Ht(t){return function(){this.removeAttribute(t)}}function Bt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xt(t,n){return function(){this.setAttribute(t,n)}}function It(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Vt(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function Yt(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Ut(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Wt(t){return function(){this.style.removeProperty(t)}}function Zt(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Gt(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function Jt(t,n){return t.style.getPropertyValue(n)||Ut(t).getComputedStyle(t,null).getPropertyValue(n)}function Kt(t){return function(){delete this[t]}}function Qt(t,n){return function(){this[t]=n}}function tn(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function nn(t){return t.trim().split(/^|\s+/)}function en(t){return t.classList||new rn(t)}function rn(t){this._node=t,this._names=nn(t.getAttribute("class")||"")}function on(t,n){for(var e=en(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function an(t,n){for(var e=en(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function un(t){return function(){on(this,t)}}function sn(t){return function(){an(this,t)}}function ln(t,n){return function(){(n.apply(this,arguments)?on:an)(this,t)}}function cn(){this.textContent=""}function fn(t){return function(){this.textContent=t}}function hn(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function pn(){this.innerHTML=""}function dn(t){return function(){this.innerHTML=t}}function gn(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function yn(){this.nextSibling&&this.parentNode.appendChild(this)}function vn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mn(){return null}function wn(){var t=this.parentNode;t&&t.removeChild(this)}function _n(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function bn(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function xn(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function $n(t,n,e){return function(){var r,i=this.__on,o=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(i)for(var a=0,u=i.length;a<u;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),void(r.value=n);this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function Mn(t,n,e){var r=Ut(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function An(t,n){return function(){return Mn(this,t,n)}}function En(t,n){return function(){return Mn(this,t,n.apply(this,arguments))}}jt.prototype={constructor:jt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},rn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Nn=[null];function kn(t,n){this._groups=t,this._parents=n}function Sn(){return new kn([[document.documentElement]],Nn)}function Cn(t){return"string"==typeof t?new kn([[document.querySelector(t)]],[document.documentElement]):new kn([[t]],Nn)}function Tn(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function zn(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Pn(){}kn.prototype=Sn.prototype={constructor:kn,select:function(t){"function"!=typeof t&&(t=Mt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,u=n[i],s=u.length,l=r[i]=new Array(s),c=0;c<s;++c)(o=u[c])&&(a=t.call(o,o.__data__,c,u))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new kn(r,this._parents)},selectAll:function(t){t="function"==typeof t?Nt(t):Et(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,u=n[o],s=u.length,l=0;l<s;++l)(a=u[l])&&(r.push(t.call(a,a.__data__,l,u)),i.push(a));return new kn(r,i)},selectChild:function(t){return this.select(null==t?Tt:function(t){return function(){return Ct.call(this.children,t)}}("function"==typeof t?t:St(t)))},selectChildren:function(t){return this.selectAll(null==t?Pt:function(t){return function(){return zt.call(this.children,t)}}("function"==typeof t?t:St(t)))},filter:function(t){"function"!=typeof t&&(t=kt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,s=r[i]=[],l=0;l<u;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&s.push(o);return new kn(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,Lt);var e,r=n?qt:Ot,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var a=o.length,u=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var f=i[c],h=o[c],p=h.length,d=Dt(t.call(f,f&&f.__data__,c,i)),g=d.length,y=s[c]=new Array(g),v=u[c]=new Array(g);r(f,h,y,v,l[c]=new Array(p),d,n);for(var m,w,_=0,b=0;_<g;++_)if(m=y[_]){for(_>=b&&(b=_+1);!(w=v[b])&&++b<g;);m._next=w||null}}return(u=new kn(u,i))._enter=s,u._exit=l,u},enter:function(){return new kn(this._enter||this._groups.map(Rt),this._parents)},exit:function(){return new kn(this._exit||this._groups.map(Rt),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(i=n(i))&&(i=i.selection()),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),u=new Array(i),s=0;s<a;++s)for(var l,c=e[s],f=r[s],h=c.length,p=u[s]=new Array(h),d=0;d<h;++d)(l=c[d]||f[d])&&(p[d]=l);for(;s<i;++s)u[s]=e[s];return new kn(u,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=Ft);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,u=e[o],s=u.length,l=i[o]=new Array(s),c=0;c<s;++c)(a=u[c])&&(l[c]=a);l.sort(n)}return new kn(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=wt(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?Bt:Ht:"function"==typeof n?e.local?Yt:Vt:e.local?It:Xt)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?Wt:"function"==typeof n?Gt:Zt)(t,n,null==e?"":e)):Jt(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?Kt:"function"==typeof n?tn:Qt)(t,n)):this.node()[t]},classed:function(t,n){var e=nn(t+"");if(arguments.length<2){for(var r=en(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?ln:n?un:sn)(e,n))},text:function(t){return arguments.length?this.each(null==t?cn:("function"==typeof t?hn:fn)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?pn:("function"==typeof t?gn:dn)(t)):this.node().innerHTML},raise:function(){return this.each(yn)},lower:function(){return this.each(vn)},append:function(t){var n="function"==typeof t?t:xt(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:xt(t),r=null==n?mn:"function"==typeof n?n:Mt(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(wn)},clone:function(t){return this.select(t?bn:_n)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(u=n?$n:xn,r=0;r<a;++r)this.each(u(o[r],n,e));return this}var u=this.node().__on;if(u)for(var s,l=0,c=u.length;l<c;++l)for(r=0,s=u[l];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,n){return this.each(("function"==typeof n?En:An)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var Rn=.7,jn=1/Rn,On="\\s*([+-]?\\d+)\\s*",qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dn=/^#([0-9a-f]{3,8})$/,Fn=new RegExp(`^rgb\\(${On},${On},${On}\\)$`),Hn=new RegExp(`^rgb\\(${Ln},${Ln},${Ln}\\)$`),Bn=new RegExp(`^rgba\\(${On},${On},${On},${qn}\\)$`),Xn=new RegExp(`^rgba\\(${Ln},${Ln},${Ln},${qn}\\)$`),In=new RegExp(`^hsl\\(${qn},${Ln},${Ln}\\)$`),Vn=new RegExp(`^hsla\\(${qn},${Ln},${Ln},${qn}\\)$`),Yn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Un(){return this.rgb().formatHex()}function Wn(){return this.rgb().formatRgb()}function Zn(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Dn.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?Gn(n):3===e?new Qn(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?Jn(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?Jn(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Fn.exec(t))?new Qn(n[1],n[2],n[3],1):(n=Hn.exec(t))?new Qn(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Bn.exec(t))?Jn(n[1],n[2],n[3],n[4]):(n=Xn.exec(t))?Jn(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=In.exec(t))?oe(n[1],n[2]/100,n[3]/100,1):(n=Vn.exec(t))?oe(n[1],n[2]/100,n[3]/100,n[4]):Yn.hasOwnProperty(t)?Gn(Yn[t]):"transparent"===t?new Qn(NaN,NaN,NaN,0):null}function Gn(t){return new Qn(t>>16&255,t>>8&255,255&t,1)}function Jn(t,n,e,r){return r<=0&&(t=n=e=NaN),new Qn(t,n,e,r)}function Kn(t,n,e,r){return 1===arguments.length?((i=t)instanceof Pn||(i=Zn(i)),i?new Qn((i=i.rgb()).r,i.g,i.b,i.opacity):new Qn):new Qn(t,n,e,null==r?1:r);var i}function Qn(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function te(){return`#${ie(this.r)}${ie(this.g)}${ie(this.b)}`}function ne(){const t=ee(this.opacity);return`${1===t?"rgb(":"rgba("}${re(this.r)}, ${re(this.g)}, ${re(this.b)}${1===t?")":`, ${t})`}`}function ee(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function re(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ie(t){return((t=re(t))<16?"0":"")+t.toString(16)}function oe(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new ue(t,n,e,r)}function ae(t){if(t instanceof ue)return new ue(t.h,t.s,t.l,t.opacity);if(t instanceof Pn||(t=Zn(t)),!t)return new ue;if(t instanceof ue)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,u=o-i,s=(o+i)/2;return u?(a=n===o?(e-r)/u+6*(e<r):e===o?(r-n)/u+2:(n-e)/u+4,u/=s<.5?o+i:2-o-i,a*=60):u=s>0&&s<1?0:a,new ue(a,u,s,t.opacity)}function ue(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function se(t){return(t=(t||0)%360)<0?t+360:t}function le(t){return Math.max(0,Math.min(1,t||0))}function ce(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}Tn(Pn,Zn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Un,formatHex:Un,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ae(this).formatHsl()},formatRgb:Wn,toString:Wn}),Tn(Qn,Kn,zn(Pn,{brighter(t){return t=null==t?jn:Math.pow(jn,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Rn:Math.pow(Rn,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qn(re(this.r),re(this.g),re(this.b),ee(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:te,formatHex:te,formatHex8:function(){return`#${ie(this.r)}${ie(this.g)}${ie(this.b)}${ie(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:ne,toString:ne})),Tn(ue,(function(t,n,e,r){return 1===arguments.length?ae(t):new ue(t,n,e,null==r?1:r)}),zn(Pn,{brighter(t){return t=null==t?jn:Math.pow(jn,t),new ue(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Rn:Math.pow(Rn,t),new ue(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Qn(ce(t>=240?t-240:t+120,i,r),ce(t,i,r),ce(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ue(se(this.h),le(this.s),le(this.l),ee(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ee(this.opacity);return`${1===t?"hsl(":"hsla("}${se(this.h)}, ${100*le(this.s)}%, ${100*le(this.l)}%${1===t?")":`, ${t})`}`}}));var fe=t=>()=>t;function he(t){return 1==(t=+t)?pe:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):fe(isNaN(n)?e:n)}}function pe(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):fe(isNaN(t)?n:t)}var de=function t(n){var e=he(n);function r(t,n){var r=e((t=Kn(t)).r,(n=Kn(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=pe(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);var ge,ye=(ge=function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,u=r<n-1?t[r+2]:2*o-i;return function(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}((e-r/n)*n,a,i,o,u)}},function(t){var n,e,r=t.length,i=new Array(r),o=new Array(r),a=new Array(r);for(n=0;n<r;++n)e=Kn(t[n]),i[n]=e.r||0,o[n]=e.g||0,a[n]=e.b||0;return i=ge(i),o=ge(o),a=ge(a),e.opacity=1,function(t){return e.r=i(t),e.g=o(t),e.b=a(t),e+""}});function ve(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(o){for(e=0;e<r;++e)i[e]=t[e]*(1-o)+n[e]*o;return i}}function me(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=Ae(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}function we(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function _e(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function be(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=Ae(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var xe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$e=new RegExp(xe.source,"g");function Me(t,n){var e,r,i,o=xe.lastIndex=$e.lastIndex=0,a=-1,u=[],s=[];for(t+="",n+="";(e=xe.exec(t))&&(r=$e.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:_e(e,r)})),o=$e.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?function(t){return function(n){return t(n)+""}}(s[0].x):function(t){return function(){return t}}(n):(n=s.length,function(t){for(var e,r=0;r<n;++r)u[(e=s[r]).i]=e.x(t);return u.join("")})}function Ae(t,n){var e,r,i=typeof n;return null==n||"boolean"===i?fe(n):("number"===i?_e:"string"===i?(e=Zn(n))?(n=e,de):Me:n instanceof Zn?de:n instanceof Date?we:(r=n,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(n)?me:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?be:_e:ve))(t,n)}function Ee(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var Ne,ke=180/Math.PI,Se={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ce(t,n,e,r,i,o){var a,u,s;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(s=t*e+n*r)&&(e-=t*s,r-=n*s),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,s/=u),t*r<n*e&&(t=-t,n=-n,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*ke,skewX:Math.atan(s)*ke,scaleX:a,scaleY:u}}function Te(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],s=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var s=a.push("translate(",null,n,null,e);u.push({i:s-4,x:_e(t,i)},{i:s-2,x:_e(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,u,s),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:_e(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,u,s),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:_e(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,u,s),function(t,n,e,r,o,a){if(t!==e||n!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:_e(t,e)},{i:u-2,x:_e(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,s),o=a=null,function(t){for(var n,e=-1,r=s.length;++e<r;)u[(n=s[e]).i]=n.x(t);return u.join("")}}}var ze,Pe,Re=Te((function(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Se:Ce(n.a,n.b,n.c,n.d,n.e,n.f)}),"px, ","px)","deg)"),je=Te((function(t){return null==t?Se:(Ne||(Ne=document.createElementNS("http://www.w3.org/2000/svg","g")),Ne.setAttribute("transform",t),(t=Ne.transform.baseVal.consolidate())?Ce((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Se)}),", ",")",")"),Oe=0,qe=0,Le=0,De=0,Fe=0,He=0,Be="object"==typeof performance&&performance.now?performance:Date,Xe="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ie(){return Fe||(Xe(Ve),Fe=Be.now()+He)}function Ve(){Fe=0}function Ye(){this._call=this._time=this._next=null}function Ue(t,n,e){var r=new Ye;return r.restart(t,n,e),r}function We(){Fe=(De=Be.now())+He,Oe=qe=0;try{!function(){Ie(),++Oe;for(var t,n=ze;n;)(t=Fe-n._time)>=0&&n._call.call(void 0,t),n=n._next;--Oe}()}finally{Oe=0,function(){var t,n,e=ze,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ze=n);Pe=t,Ge(r)}(),Fe=0}}function Ze(){var t=Be.now(),n=t-De;n>1e3&&(He-=n,De=t)}function Ge(t){Oe||(qe&&(qe=clearTimeout(qe)),t-Fe>24?(t<1/0&&(qe=setTimeout(We,t-Be.now()-He)),Le&&(Le=clearInterval(Le))):(Le||(De=Be.now(),Le=setInterval(Ze,1e3)),Oe=1,Xe(We)))}function Je(t,n,e){var r=new Ye;return n=null==n?0:+n,r.restart((e=>{r.stop(),t(e+n)}),n,e),r}Ye.prototype=Ue.prototype={constructor:Ye,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?Ie():+e)+(null==n?0:+n),this._next||Pe===this||(Pe?Pe._next=this:ze=this,Pe=this),this._call=t,this._time=e,Ge()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ge())}};var Ke=pt("start","end","cancel","interrupt"),Qe=[];function tr(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(t){e.state=1,e.timer.restart(a,e.delay,e.time),e.delay<=t&&a(t-e.delay)}function a(o){var l,c,f,h;if(1!==e.state)return s();for(l in i)if((h=i[l]).name===e.name){if(3===h.state)return Je(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<n&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[l])}if(Je((function(){3===e.state&&(e.state=4,e.timer.restart(u,e.delay,e.time),u(o))})),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,r=new Array(f=e.tween.length),l=0,c=-1;l<f;++l)(h=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(r[++c]=h);r.length=c+1}}function u(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(s),e.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),s())}function s(){for(var r in e.state=6,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=Ue(o,0,e.time)}(t,e,{name:n,index:r,group:i,on:Ke,tween:Qe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function nr(t,n){var e=rr(t,n);if(e.state>0)throw new Error("too late; already scheduled");return e}function er(t,n){var e=rr(t,n);if(e.state>3)throw new Error("too late; already running");return e}function rr(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function ir(t,n){var e,r;return function(){var i=er(this,t),o=i.tween;if(o!==e)for(var a=0,u=(r=e=o).length;a<u;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}function or(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=er(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:n,value:e},s=0,l=i.length;s<l;++s)if(i[s].name===n){i[s]=u;break}s===l&&i.push(u)}o.tween=i}}function ar(t,n,e){var r=t._id;return t.each((function(){var t=er(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return rr(t,r).value[n]}}function ur(t,n){var e;return("number"==typeof n?_e:n instanceof Zn?de:(e=Zn(n))?(n=e,de):Me)(t,n)}function sr(t){return function(){this.removeAttribute(t)}}function lr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function cr(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=n(r=a,e)}}function fr(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=n(r=a,e)}}function hr(t,n,e){var r,i,o;return function(){var a,u,s=e(this);if(null!=s)return(a=this.getAttribute(t))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,s));this.removeAttribute(t)}}function pr(t,n,e){var r,i,o;return function(){var a,u,s=e(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,s));this.removeAttributeNS(t.space,t.local)}}function dr(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}(t,i)),e}return i._value=n,i}function gr(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}(t,i)),e}return i._value=n,i}function yr(t,n){return function(){nr(this,t).delay=+n.apply(this,arguments)}}function vr(t,n){return n=+n,function(){nr(this,t).delay=n}}function mr(t,n){return function(){er(this,t).duration=+n.apply(this,arguments)}}function wr(t,n){return n=+n,function(){er(this,t).duration=n}}var _r=Sn.prototype.constructor;function br(t){return function(){this.style.removeProperty(t)}}var xr=0;function $r(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Mr(t){return Sn().transition(t)}function Ar(){return++xr}var Er=Sn.prototype;$r.prototype=Mr.prototype={constructor:$r,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Mt(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,s,l=r[a],c=l.length,f=o[a]=new Array(c),h=0;h<c;++h)(u=l[h])&&(s=t.call(u,u.__data__,h,l))&&("__data__"in u&&(s.__data__=u.__data__),f[h]=s,tr(f[h],n,e,h,f,rr(u,e)));return new $r(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Et(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var s,l=r[u],c=l.length,f=0;f<c;++f)if(s=l[f]){for(var h,p=t.call(s,s.__data__,f,l),d=rr(s,e),g=0,y=p.length;g<y;++g)(h=p[g])&&tr(h,n,e,g,p,d);o.push(p),a.push(s)}return new $r(o,a,n,e)},selectChild:Er.selectChild,selectChildren:Er.selectChildren,filter:function(t){"function"!=typeof t&&(t=kt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,s=r[i]=[],l=0;l<u;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&s.push(o);return new $r(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,l=n[u],c=e[u],f=l.length,h=a[u]=new Array(f),p=0;p<f;++p)(s=l[p]||c[p])&&(h[p]=s);for(;u<r;++u)a[u]=n[u];return new $r(a,this._parents,this._name,this._id)},selection:function(){return new _r(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Ar(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,l=0;l<s;++l)if(a=u[l]){var c=rr(a,n);tr(a,t,e,l,u,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new $r(r,this._parents,t,e)},call:Er.call,nodes:Er.nodes,node:Er.node,size:Er.size,empty:Er.empty,each:Er.each,on:function(t,n){var e=this._id;return arguments.length<2?rr(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?nr:er;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(n,e),a.on=i}}(e,t,n))},attr:function(t,n){var e=wt(t),r="transform"===e?je:ur;return this.attrTween(t,"function"==typeof n?(e.local?pr:hr)(e,r,ar(this,"attr."+t,n)):null==n?(e.local?lr:sr)(e):(e.local?fr:cr)(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=wt(t);return this.tween(e,(r.local?dr:gr)(r,n))},style:function(t,n,e){var r="transform"==(t+="")?Re:ur;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=Jt(this,t),a=(this.style.removeProperty(t),Jt(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,br(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var a=Jt(this,t),u=e(this),s=u+"";return null==u&&(this.style.removeProperty(t),s=u=Jt(this,t)),a===s?null:a===r&&s===i?o:(i=s,o=n(r=a,u))}}(t,r,ar(this,"style."+t,n))).each(function(t,n){var e,r,i,o,a="style."+n,u="end."+a;return function(){var s=er(this,t),l=s.on,c=null==s.value[a]?o||(o=br(n)):void 0;l===e&&i===c||(r=(e=l).copy()).on(u,i=c),s.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var a=Jt(this,t);return a===o?null:a===r?i:i=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}(t,o,e)),r}return o._value=n,o}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(ar(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,function(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&function(t){return function(n){this.textContent=t.call(this,n)}}(r)),n}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=rr(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?ir:or)(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?yr:vr)(n,t)):rr(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?mr:wr)(n,t)):rr(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){er(this,t).ease=n}}(n,t)):rr(this.node(),n).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;er(this,t).ease=e}}(this._id,t))},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(o,a){var u={value:a},s={value:function(){0==--i&&o()}};e.each((function(){var e=er(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(u),n._.interrupt.push(u),n._.end.push(s)),e.on=n})),0===i&&o()}))},[Symbol.iterator]:Er[Symbol.iterator]};const Nr=t=>+t;var kr={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Sr(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}Sn.prototype.interrupt=function(t){return this.each((function(){!function(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>2&&e.state<5,e.state=6,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)}))},Sn.prototype.transition=function(t){var n,e;t instanceof $r?(n=t._id,t=t._name):(n=Ar(),(e=kr).time=Ie(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,l=0;l<s;++l)(a=u[l])&&tr(a,t,n,l,u,e||Sr(a,n));return new $r(r,this._parents,t,n)};const Cr=Math.PI,Tr=2*Cr,zr=1e-6,Pr=Tr-zr;function Rr(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}class jr{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Rr:function(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return Rr;const e=10**n;return function(t){this._+=t[0];for(let n=1,r=t.length;n<r;++n)this._+=Math.round(arguments[n]*e)/e+t[n]}}(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,e,r){this._append`Q${+t},${+n},${this._x1=+e},${this._y1=+r}`}bezierCurveTo(t,n,e,r,i,o){this._append`C${+t},${+n},${+e},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,e,r,i){if(t=+t,n=+n,e=+e,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,u=e-t,s=r-n,l=o-t,c=a-n,f=l*l+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=n}`;else if(f>zr)if(Math.abs(c*u-s*l)>zr&&i){let h=e-o,p=r-a,d=u*u+s*s,g=h*h+p*p,y=Math.sqrt(d),v=Math.sqrt(f),m=i*Math.tan((Cr-Math.acos((d+f-g)/(2*y*v)))/2),w=m/v,_=m/y;Math.abs(w-1)>zr&&this._append`L${t+w*l},${n+w*c}`,this._append`A${i},${i},0,0,${+(c*h>l*p)},${this._x1=t+_*u},${this._y1=n+_*s}`}else this._append`L${this._x1=t},${this._y1=n}`;else;}arc(t,n,e,r,i,o){if(t=+t,n=+n,o=!!o,(e=+e)<0)throw new Error(`negative radius: ${e}`);let a=e*Math.cos(r),u=e*Math.sin(r),s=t+a,l=n+u,c=1^o,f=o?r-i:i-r;null===this._x1?this._append`M${s},${l}`:(Math.abs(this._x1-s)>zr||Math.abs(this._y1-l)>zr)&&this._append`L${s},${l}`,e&&(f<0&&(f=f%Tr+Tr),f>Pr?this._append`A${e},${e},0,1,${c},${t-a},${n-u}A${e},${e},0,1,${c},${this._x1=s},${this._y1=l}`:f>zr&&this._append`A${e},${e},0,${+(f>=Cr)},${c},${this._x1=t+e*Math.cos(i)},${this._y1=n+e*Math.sin(i)}`)}rect(t,n,e,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${e=+e}v${+r}h${-e}Z`}toString(){return this._}}const Or=134217729;function qr(t,n,e,r,i){let o,a,u,s,l=n[0],c=r[0],f=0,h=0;c>l==c>-l?(o=l,l=n[++f]):(o=c,c=r[++h]);let p=0;if(f<t&&h<e)for(c>l==c>-l?(a=l+o,u=o-(a-l),l=n[++f]):(a=c+o,u=o-(a-c),c=r[++h]),o=a,0!==u&&(i[p++]=u);f<t&&h<e;)c>l==c>-l?(a=o+l,s=a-o,u=o-(a-s)+(l-s),l=n[++f]):(a=o+c,s=a-o,u=o-(a-s)+(c-s),c=r[++h]),o=a,0!==u&&(i[p++]=u);for(;f<t;)a=o+l,s=a-o,u=o-(a-s)+(l-s),l=n[++f],o=a,0!==u&&(i[p++]=u);for(;h<e;)a=o+c,s=a-o,u=o-(a-s)+(c-s),c=r[++h],o=a,0!==u&&(i[p++]=u);return 0===o&&0!==p||(i[p++]=o),p}function Lr(t){return new Float64Array(t)}const Dr=Lr(4),Fr=Lr(8),Hr=Lr(12),Br=Lr(16),Xr=Lr(4);function Ir(t,n,e,r,i,o){const a=(n-o)*(e-i),u=(t-i)*(r-o),s=a-u,l=Math.abs(a+u);return Math.abs(s)>=33306690738754716e-32*l?s:-function(t,n,e,r,i,o,a){let u,s,l,c,f,h,p,d,g,y,v,m,w,_,b,x,$,M;const A=t-i,E=e-i,N=n-o,k=r-o;_=A*k,h=Or*A,p=h-(h-A),d=A-p,h=Or*k,g=h-(h-k),y=k-g,b=d*y-(_-p*g-d*g-p*y),x=N*E,h=Or*N,p=h-(h-N),d=N-p,h=Or*E,g=h-(h-E),y=E-g,$=d*y-(x-p*g-d*g-p*y),v=b-$,f=b-v,Dr[0]=b-(v+f)+(f-$),m=_+v,f=m-_,w=_-(m-f)+(v-f),v=w-x,f=w-v,Dr[1]=w-(v+f)+(f-x),M=m+v,f=M-m,Dr[2]=m-(M-f)+(v-f),Dr[3]=M;let S=function(t,n){let e=n[0];for(let r=1;r<t;r++)e+=n[r];return e}(4,Dr),C=22204460492503146e-32*a;if(S>=C||-S>=C)return S;if(f=t-A,u=t-(A+f)+(f-i),f=e-E,l=e-(E+f)+(f-i),f=n-N,s=n-(N+f)+(f-o),f=r-k,c=r-(k+f)+(f-o),0===u&&0===s&&0===l&&0===c)return S;if(C=11093356479670487e-47*a+33306690738754706e-32*Math.abs(S),S+=A*c+k*u-(N*l+E*s),S>=C||-S>=C)return S;_=u*k,h=Or*u,p=h-(h-u),d=u-p,h=Or*k,g=h-(h-k),y=k-g,b=d*y-(_-p*g-d*g-p*y),x=s*E,h=Or*s,p=h-(h-s),d=s-p,h=Or*E,g=h-(h-E),y=E-g,$=d*y-(x-p*g-d*g-p*y),v=b-$,f=b-v,Xr[0]=b-(v+f)+(f-$),m=_+v,f=m-_,w=_-(m-f)+(v-f),v=w-x,f=w-v,Xr[1]=w-(v+f)+(f-x),M=m+v,f=M-m,Xr[2]=m-(M-f)+(v-f),Xr[3]=M;const T=qr(4,Dr,4,Xr,Fr);_=A*c,h=Or*A,p=h-(h-A),d=A-p,h=Or*c,g=h-(h-c),y=c-g,b=d*y-(_-p*g-d*g-p*y),x=N*l,h=Or*N,p=h-(h-N),d=N-p,h=Or*l,g=h-(h-l),y=l-g,$=d*y-(x-p*g-d*g-p*y),v=b-$,f=b-v,Xr[0]=b-(v+f)+(f-$),m=_+v,f=m-_,w=_-(m-f)+(v-f),v=w-x,f=w-v,Xr[1]=w-(v+f)+(f-x),M=m+v,f=M-m,Xr[2]=m-(M-f)+(v-f),Xr[3]=M;const z=qr(T,Fr,4,Xr,Hr);_=u*c,h=Or*u,p=h-(h-u),d=u-p,h=Or*c,g=h-(h-c),y=c-g,b=d*y-(_-p*g-d*g-p*y),x=s*l,h=Or*s,p=h-(h-s),d=s-p,h=Or*l,g=h-(h-l),y=l-g,$=d*y-(x-p*g-d*g-p*y),v=b-$,f=b-v,Xr[0]=b-(v+f)+(f-$),m=_+v,f=m-_,w=_-(m-f)+(v-f),v=w-x,f=w-v,Xr[1]=w-(v+f)+(f-x),M=m+v,f=M-m,Xr[2]=m-(M-f)+(v-f),Xr[3]=M;const P=qr(z,Hr,4,Xr,Br);return Br[P-1]}(t,n,e,r,i,o,l)}var Vr={},Yr={};function Ur(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function Wr(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function Zr(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function Gr(t){var n,e=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((n=t.getUTCFullYear())<0?"-"+Zr(-n,6):n>9999?"+"+Zr(n,6):Zr(n,4))+"-"+Zr(t.getUTCMonth()+1,2)+"-"+Zr(t.getUTCDate(),2)+(o?"T"+Zr(e,2)+":"+Zr(r,2)+":"+Zr(i,2)+"."+Zr(o,3)+"Z":i?"T"+Zr(e,2)+":"+Zr(r,2)+":"+Zr(i,2)+"Z":r||e?"T"+Zr(e,2)+":"+Zr(r,2)+"Z":"")}var Jr=function(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,a=0,u=0,s=o<=0,l=!1;function c(){if(s)return Yr;if(l)return l=!1,Vr;var n,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(n=a)>=o?s=!0:10===(r=t.charCodeAt(a++))?l=!0:13===r&&(l=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,n-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(n=a++)))l=!0;else if(13===r)l=!0,10===t.charCodeAt(a)&&++a;else if(r!==e)continue;return t.slice(i,n)}return s=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=c())!==Yr;){for(var f=[];r!==Vr&&r!==Yr;)f.push(r),r=c();n&&null==(f=n(f,u++))||i.push(f)}return i}function i(n,e){return n.map((function(n){return e.map((function(t){return a(n[t])})).join(t)}))}function o(n){return n.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?Gr(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,(function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=Ur(t);return function(r,i){return n(e(r),i,t)}}(t,n):Ur(t)}));return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=Wr(n)),[e.map(a).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=Wr(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}(","),Kr=Jr.parse;function Qr(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var ti,ni=(ti=Kr,function(t,n,e){return 2===arguments.length&&"function"==typeof n&&(e=n,n=void 0),function(t,n){return fetch(t,n).then(Qr)}(t,n).then((function(t){return ti(t,e)}))});function ei(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function ri(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function ii(t){return(t=ri(Math.abs(t)))?t[1]:NaN}var oi,ai=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ui(t){if(!(n=ai.exec(t)))throw new Error("invalid format: "+t);var n;return new si({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function si(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function li(t,n){var e=ri(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ui.prototype=si.prototype,si.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var ci={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>li(100*t,n),r:li,s:function(t,n){var e=ri(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(oi=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ri(t,Math.max(0,n+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function fi(t){return t}var hi,pi,di,gi=Array.prototype.map,yi=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vi(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?fi:(n=gi.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,u=n[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),o.push(t.substring(i-=u,i+u)),!((s+=u+1)>r));)u=n[a=(a+1)%n.length];return o.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?fi:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(gi.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function f(t){var n=(t=ui(t)).fill,e=t.align,f=t.sign,h=t.symbol,p=t.zero,d=t.width,g=t.comma,y=t.precision,v=t.trim,m=t.type;"n"===m?(g=!0,m="g"):ci[m]||(void 0===y&&(y=12),v=!0,m="g"),(p||"0"===n&&"="===e)&&(p=!0,n="0",e="=");var w="$"===h?i:"#"===h&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",_="$"===h?o:/[%p]/.test(m)?s:"",b=ci[m],x=/[defgprs%]/.test(m);function $(t){var i,o,s,h=w,$=_;if("c"===m)$=b(t)+$,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:b(Math.abs(t),y),v&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),M&&0==+t&&"+"!==f&&(M=!1),h=(M?"("===f?f:l:"-"===f||"("===f?"":f)+h,$=("s"===m?yi[8+oi/3]:"")+$+(M&&"("===f?")":""),x)for(i=-1,o=t.length;++i<o;)if(48>(s=t.charCodeAt(i))||s>57){$=(46===s?a+t.slice(i+1):t.slice(i))+$,t=t.slice(0,i);break}}g&&!p&&(t=r(t,1/0));var A=h.length+t.length+$.length,E=A<d?new Array(d-A+1).join(n):"";switch(g&&p&&(t=r(E+t,E.length?d-$.length:1/0),E=""),e){case"<":t=h+t+$+E;break;case"=":t=h+E+t+$;break;case"^":t=E.slice(0,A=E.length>>1)+h+t+$+E.slice(A);break;default:t=E+h+t+$}return u(t)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),$.toString=function(){return t+""},$}return{format:f,formatPrefix:function(t,n){var e=f(((t=ui(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(ii(n)/3))),i=Math.pow(10,-r),o=yi[8+r/3];return function(t){return e(i*t)+o}}}}hi=vi({thousands:",",grouping:[3],currency:["$",""]}),pi=hi.format,di=hi.formatPrefix;var mi=1e-6,wi=Math.PI,_i=wi/2,bi=wi/4,xi=2*wi,$i=180/wi,Mi=wi/180,Ai=Math.abs,Ei=Math.atan,Ni=Math.atan2,ki=Math.cos,Si=Math.exp,Ci=Math.log,Ti=Math.sin,zi=Math.sign||function(t){return t>0?1:t<0?-1:0},Pi=Math.sqrt,Ri=Math.tan;function ji(t){return t>1?_i:t<-1?-_i:Math.asin(t)}function Oi(){}function qi(t,n){t&&Di.hasOwnProperty(t.type)&&Di[t.type](t,n)}var Li={Feature:function(t,n){qi(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)qi(e[r].geometry,n)}},Di={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Fi(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Fi(e[r],n,0)},Polygon:function(t,n){Hi(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Hi(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)qi(e[r],n)}};function Fi(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function Hi(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Fi(t[e],n,1);n.polygonEnd()}function Bi(t,n){t&&Li.hasOwnProperty(t.type)?Li[t.type](t,n):qi(t,n)}function Xi(t){return[Ni(t[1],t[0]),ji(t[2])]}function Ii(t){var n=t[0],e=t[1],r=ki(e);return[r*ki(n),r*Ti(n),Ti(e)]}function Vi(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Yi(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Ui(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Wi(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Zi(t){var n=Pi(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Gi(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function Ji(t,n){return Ai(t)>wi&&(t-=Math.round(t/xi)*xi),[t,n]}function Ki(t,n,e){return(t%=xi)?n||e?Gi(to(t),no(n,e)):to(t):n||e?no(n,e):Ji}function Qi(t){return function(n,e){return Ai(n+=t)>wi&&(n-=Math.round(n/xi)*xi),[n,e]}}function to(t){var n=Qi(t);return n.invert=Qi(-t),n}function no(t,n){var e=ki(t),r=Ti(t),i=ki(n),o=Ti(n);function a(t,n){var a=ki(n),u=ki(t)*a,s=Ti(t)*a,l=Ti(n),c=l*e+u*r;return[Ni(s*i-c*o,u*e-l*r),ji(c*i+s*o)]}return a.invert=function(t,n){var a=ki(n),u=ki(t)*a,s=Ti(t)*a,l=Ti(n),c=l*i-s*o;return[Ni(s*i+l*o,u*e+c*r),ji(c*e-u*r)]},a}function eo(t,n){(n=Ii(n))[0]-=t,Zi(n);var e,r=(e=-n[1])>1?0:e<-1?wi:Math.acos(e);return((-n[2]<0?-r:r)+xi-mi)%xi}function ro(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:Oi,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function io(t,n){return Ai(t[0]-n[0])<mi&&Ai(t[1]-n[1])<mi}function oo(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function ao(t,n,e,r,i){var o,a,u=[],s=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(io(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}u.push(e=new oo(r,t,null,!0)),s.push(e.o=new oo(r,null,e,!1)),u.push(e=new oo(a,t,null,!1)),s.push(e.o=new oo(a,null,e,!0))}})),u.length){for(s.sort(n),uo(u),uo(s),o=0,a=s.length;o<a;++o)s[o].e=e=!e;for(var l,c,f=u[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(l=h.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function uo(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function so(t){return Ai(t[0])<=wi?t[0]:zi(t[0])*((Ai(t[0])+wi)%xi-wi)}function lo(t,n,e,r){return function(i){var o,a,u,s=n(i),l=ro(),c=n(l),f=!1,h={point:p,lineStart:g,lineEnd:y,polygonStart:function(){h.point=v,h.lineStart=m,h.lineEnd=w,a=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=g,h.lineEnd=y,a=rt(a);var t=function(t,n){var e=so(n),r=n[1],i=Ti(r),o=[Ti(e),-ki(e),0],a=0,u=0,s=new U;1===i?r=_i+mi:-1===i&&(r=-_i-mi);for(var l=0,c=t.length;l<c;++l)if(h=(f=t[l]).length)for(var f,h,p=f[h-1],d=so(p),g=p[1]/2+bi,y=Ti(g),v=ki(g),m=0;m<h;++m,d=_,y=x,v=$,p=w){var w=f[m],_=so(w),b=w[1]/2+bi,x=Ti(b),$=ki(b),M=_-d,A=M>=0?1:-1,E=A*M,N=E>wi,k=y*x;if(s.add(Ni(k*A*Ti(E),v*$+k*ki(E))),a+=N?M+A*xi:M,N^d>=e^_>=e){var S=Yi(Ii(p),Ii(w));Zi(S);var C=Yi(o,S);Zi(C);var T=(N^M>=0?-1:1)*ji(C[2]);(r>T||r===T&&(S[0]||S[1]))&&(u+=N^M>=0?1:-1)}}return(a<-1e-6||a<mi&&s<-1e-12)^1&u}(o,r);a.length?(f||(i.polygonStart(),f=!0),ao(a,fo,t,e,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(n,e){t(n,e)&&i.point(n,e)}function d(t,n){s.point(t,n)}function g(){h.point=d,s.lineStart()}function y(){h.point=p,s.lineEnd()}function v(t,n){u.push([t,n]),c.point(t,n)}function m(){c.lineStart(),u=[]}function w(){v(u[0][0],u[0][1]),c.lineEnd();var t,n,e,r,s=c.clean(),h=l.result(),p=h.length;if(u.pop(),o.push(u),u=null,p)if(1&s){if((n=(e=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else p>1&&2&s&&h.push(h.pop().concat(h.shift())),a.push(h.filter(co))}return h}}function co(t){return t.length>1}function fo(t,n){return((t=t.x)[0]<0?t[1]-_i-mi:_i-t[1])-((n=n.x)[0]<0?n[1]-_i-mi:_i-n[1])}Ji.invert=Ji;var ho=lo((function(){return!0}),(function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?wi:-wi,s=Ai(o-e);Ai(s-wi)<mi?(t.point(e,r=(r+a)/2>0?_i:-_i),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&s>=wi&&(Ai(e-i)<mi&&(e-=i*mi),Ai(o-u)<mi&&(o-=u*mi),r=function(t,n,e,r){var i,o,a=Ti(t-e);return Ai(a)>mi?Ei((Ti(n)*(o=ki(r))*Ti(e)-Ti(r)*(i=ki(n))*Ti(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var i;if(null==t)i=e*_i,r.point(-wi,i),r.point(0,i),r.point(wi,i),r.point(wi,0),r.point(wi,-i),r.point(0,-i),r.point(-wi,-i),r.point(-wi,0),r.point(-wi,i);else if(Ai(t[0]-n[0])>mi){var o=t[0]<n[0]?wi:-wi;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}),[-wi,-_i]);function po(t){var n=ki(t),e=2*Mi,r=n>0,i=Ai(n)>mi;function o(t,e){return ki(t)*ki(e)>n}function a(t,e,r){var i=[1,0,0],o=Yi(Ii(t),Ii(e)),a=Vi(o,o),u=o[0],s=a-u*u;if(!s)return!r&&t;var l=n*a/s,c=-n*u/s,f=Yi(i,o),h=Wi(i,l);Ui(h,Wi(o,c));var p=f,d=Vi(h,p),g=Vi(p,p),y=d*d-g*(Vi(h,h)-1);if(!(y<0)){var v=Pi(y),m=Wi(p,(-d-v)/g);if(Ui(m,h),m=Xi(m),!r)return m;var w,_=t[0],b=e[0],x=t[1],$=e[1];b<_&&(w=_,_=b,b=w);var M=b-_,A=Ai(M-wi)<mi;if(!A&&$<x&&(w=x,x=$,$=w),A||M<mi?A?x+$>0^m[1]<(Ai(m[0]-_)<mi?x:$):x<=m[1]&&m[1]<=$:M>wi^(_<=m[0]&&m[0]<=b)){var E=Wi(p,(-d+v)/g);return Ui(E,h),[m,Xi(E)]}}}function u(n,e){var i=r?t:wi-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return lo(o,(function(t){var n,e,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(f,h){var p,d=[f,h],g=o(f,h),y=r?g?0:u(f,h):g?u(f+(f<0?wi:-wi),h):0;if(!n&&(l=s=g)&&t.lineStart(),g!==s&&(!(p=a(n,d))||io(n,p)||io(d,p))&&(d[2]=1),g!==s)c=0,g?(t.lineStart(),p=a(d,n),t.point(p[0],p[1])):(p=a(n,d),t.point(p[0],p[1],2),t.lineEnd()),n=p;else if(i&&n&&r^g){var v;y&e||!(v=a(d,n,!0))||(c=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!g||n&&io(n,d)||t.point(d[0],d[1]),n=d,s=g,e=y},lineEnd:function(){s&&t.lineEnd(),n=null},clean:function(){return c|(l&&s)<<1}}}),(function(n,r,i,o){!function(t,n,e,r,i,o){if(e){var a=ki(n),u=Ti(n),s=r*e;null==i?(i=n+r*xi,o=n-s/2):(i=eo(a,i),o=eo(a,o),(r>0?i<o:i>o)&&(i+=r*xi));for(var l,c=i;r>0?c>o:c<o;c-=s)l=Xi([a,-u*ki(c),-u*Ti(c)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-wi,t-wi])}var go=1e9,yo=-go;function vo(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,u,l){var c=0,f=0;if(null==i||(c=a(i,u))!==(f=a(o,u))||s(i,o)<0^u>0)do{l.point(0===c||3===c?t:e,c>1?r:n)}while((c=(c+u+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return Ai(r[0]-t)<mi?i>0?0:3:Ai(r[0]-e)<mi?i>0?2:1:Ai(r[1]-n)<mi?i>0?1:0:i>0?3:2}function u(t,n){return s(t.x,n.x)}function s(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var s,l,c,f,h,p,d,g,y,v,m,w=a,_=ro(),b={point:x,lineStart:function(){b.point=$,l&&l.push(c=[]);v=!0,y=!1,d=g=NaN},lineEnd:function(){s&&($(f,h),p&&y&&_.rejoin(),s.push(_.result()));b.point=x,y&&w.lineEnd()},polygonStart:function(){w=_,s=[],l=[],m=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=l.length;e<i;++e)for(var o,a,u=l[e],s=1,c=u.length,f=u[0],h=f[0],p=f[1];s<c;++s)o=h,a=p,h=(f=u[s])[0],p=f[1],a<=r?p>r&&(h-o)*(r-a)>(p-a)*(t-o)&&++n:p<=r&&(h-o)*(r-a)<(p-a)*(t-o)&&--n;return n}(),e=m&&n,i=(s=rt(s)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&ao(s,u,n,o,a),a.polygonEnd());w=a,s=l=c=null}};function x(t,n){i(t,n)&&w.point(t,n)}function $(o,a){var u=i(o,a);if(l&&c.push([o,a]),v)f=o,h=a,p=u,v=!1,u&&(w.lineStart(),w.point(o,a));else if(u&&y)w.point(o,a);else{var s=[d=Math.max(yo,Math.min(go,d)),g=Math.max(yo,Math.min(go,g))],_=[o=Math.max(yo,Math.min(go,o)),a=Math.max(yo,Math.min(go,a))];!function(t,n,e,r,i,o){var a,u=t[0],s=t[1],l=0,c=1,f=n[0]-u,h=n[1]-s;if(a=e-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-u,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=o-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=u+l*f,t[1]=s+l*h),c<1&&(n[0]=u+c*f,n[1]=s+c*h),!0}}}}}(s,_,t,n,e,r)?u&&(w.lineStart(),w.point(o,a),m=!1):(y||(w.lineStart(),w.point(s[0],s[1])),w.point(_[0],_[1]),u||w.lineEnd(),m=!1)}d=o,g=a,y=u}return b}}var mo,wo,_o,bo,xo=t=>t,$o=new U,Mo=new U,Ao={point:Oi,lineStart:Oi,lineEnd:Oi,polygonStart:function(){Ao.lineStart=Eo,Ao.lineEnd=So},polygonEnd:function(){Ao.lineStart=Ao.lineEnd=Ao.point=Oi,$o.add(Ai(Mo)),Mo=new U},result:function(){var t=$o/2;return $o=new U,t}};function Eo(){Ao.point=No}function No(t,n){Ao.point=ko,mo=_o=t,wo=bo=n}function ko(t,n){Mo.add(bo*t-_o*n),_o=t,bo=n}function So(){ko(mo,wo)}var Co=Ao,To=1/0,zo=To,Po=-To,Ro=Po;var jo,Oo,qo,Lo,Do={point:function(t,n){t<To&&(To=t);t>Po&&(Po=t);n<zo&&(zo=n);n>Ro&&(Ro=n)},lineStart:Oi,lineEnd:Oi,polygonStart:Oi,polygonEnd:Oi,result:function(){var t=[[To,zo],[Po,Ro]];return Po=Ro=-(zo=To=1/0),t}},Fo=0,Ho=0,Bo=0,Xo=0,Io=0,Vo=0,Yo=0,Uo=0,Wo=0,Zo={point:Go,lineStart:Jo,lineEnd:ta,polygonStart:function(){Zo.lineStart=na,Zo.lineEnd=ea},polygonEnd:function(){Zo.point=Go,Zo.lineStart=Jo,Zo.lineEnd=ta},result:function(){var t=Wo?[Yo/Wo,Uo/Wo]:Vo?[Xo/Vo,Io/Vo]:Bo?[Fo/Bo,Ho/Bo]:[NaN,NaN];return Fo=Ho=Bo=Xo=Io=Vo=Yo=Uo=Wo=0,t}};function Go(t,n){Fo+=t,Ho+=n,++Bo}function Jo(){Zo.point=Ko}function Ko(t,n){Zo.point=Qo,Go(qo=t,Lo=n)}function Qo(t,n){var e=t-qo,r=n-Lo,i=Pi(e*e+r*r);Xo+=i*(qo+t)/2,Io+=i*(Lo+n)/2,Vo+=i,Go(qo=t,Lo=n)}function ta(){Zo.point=Go}function na(){Zo.point=ra}function ea(){ia(jo,Oo)}function ra(t,n){Zo.point=ia,Go(jo=qo=t,Oo=Lo=n)}function ia(t,n){var e=t-qo,r=n-Lo,i=Pi(e*e+r*r);Xo+=i*(qo+t)/2,Io+=i*(Lo+n)/2,Vo+=i,Yo+=(i=Lo*t-qo*n)*(qo+t),Uo+=i*(Lo+n),Wo+=3*i,Go(qo=t,Lo=n)}var oa=Zo;function aa(t){this._context=t}aa.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,xi)}},result:Oi};var ua,sa,la,ca,fa,ha=new U,pa={point:Oi,lineStart:function(){pa.point=da},lineEnd:function(){ua&&ga(sa,la),pa.point=Oi},polygonStart:function(){ua=!0},polygonEnd:function(){ua=null},result:function(){var t=+ha;return ha=new U,t}};function da(t,n){pa.point=ga,sa=ca=t,la=fa=n}function ga(t,n){ca-=t,fa-=n,ha.add(Pi(ca*ca+fa*fa)),ca=t,fa=n}var ya=pa;let va,ma,wa,_a;class ba{constructor(t){this._append=null==t?xa:function(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return xa;if(n!==va){const t=10**n;va=n,ma=function(n){let e=1;this._+=n[0];for(const r=n.length;e<r;++e)this._+=Math.round(arguments[e]*t)/t+n[e]}}return ma}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:this._append`M${t},${n}`,this._point=1;break;case 1:this._append`L${t},${n}`;break;default:if(this._append`M${t},${n}`,this._radius!==wa||this._append!==ma){const t=this._radius,n=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,wa=t,ma=this._append,_a=this._,this._=n}this._+=_a}}result(){const t=this._;return this._="",t.length?t:null}}function xa(t){let n=1;this._+=t[0];for(const e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function $a(t,n){let e,r,i=3,o=4.5;function a(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),Bi(t,e(r))),r.result()}return a.area=function(t){return Bi(t,e(Co)),Co.result()},a.measure=function(t){return Bi(t,e(ya)),ya.result()},a.bounds=function(t){return Bi(t,e(Do)),Do.result()},a.centroid=function(t){return Bi(t,e(oa)),oa.result()},a.projection=function(n){return arguments.length?(e=null==n?(t=null,xo):(t=n).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(n=null,new ba(i)):new aa(n=t),"function"!=typeof o&&r.pointRadius(o),a):n},a.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),a):o},a.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);i=n}return null===n&&(r=new ba(i)),a},a.projection(t).digits(i).context(n)}function Ma(t){return function(n){var e=new Aa;for(var r in t)e[r]=t[r];return e.stream=n,e}}function Aa(){}function Ea(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Bi(e,t.stream(Do)),n(Do.result()),null!=r&&t.clipExtent(r),t}function Na(t,n,e){return Ea(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,u])}),e)}Aa.prototype={constructor:Aa,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ka=ki(30*Mi);function Sa(t,n){return+n?function(t,n){function e(r,i,o,a,u,s,l,c,f,h,p,d,g,y){var v=l-r,m=c-i,w=v*v+m*m;if(w>4*n&&g--){var _=a+h,b=u+p,x=s+d,$=Pi(_*_+b*b+x*x),M=ji(x/=$),A=Ai(Ai(x)-1)<mi||Ai(o-f)<mi?(o+f)/2:Ni(b,_),E=t(A,M),N=E[0],k=E[1],S=N-r,C=k-i,T=m*S-v*C;(T*T/w>n||Ai((v*S+m*C)/w-.5)>.3||a*h+u*p+s*d<ka)&&(e(r,i,o,a,u,s,N,k,A,_/=$,b/=$,x,g,y),y.point(N,k),e(N,k,A,_,b,x,l,c,f,h,p,d,g,y))}}return function(n){var r,i,o,a,u,s,l,c,f,h,p,d,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){n.polygonStart(),g.lineStart=_},polygonEnd:function(){n.polygonEnd(),g.lineStart=v}};function y(e,r){e=t(e,r),n.point(e[0],e[1])}function v(){c=NaN,g.point=m,n.lineStart()}function m(r,i){var o=Ii([r,i]),a=t(r,i);e(c,f,l,h,p,d,c=a[0],f=a[1],l=r,h=o[0],p=o[1],d=o[2],16,n),n.point(c,f)}function w(){g.point=y,n.lineEnd()}function _(){v(),g.point=b,g.lineEnd=x}function b(t,n){m(r=t,n),i=c,o=f,a=h,u=p,s=d,g.point=m}function x(){e(c,f,l,h,p,d,i,o,r,a,u,s,16,n),g.lineEnd=w,w()}return g}}(t,n):function(t){return Ma({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var Ca=Ma({point:function(t,n){this.stream.point(t*Mi,n*Mi)}});function Ta(t,n,e,r,i,o){if(!o)return function(t,n,e,r,i){function o(o,a){return[n+t*(o*=r),e-t*(a*=i)]}return o.invert=function(o,a){return[(o-n)/t*r,(e-a)/t*i]},o}(t,n,e,r,i);var a=ki(o),u=Ti(o),s=a*t,l=u*t,c=a/t,f=u/t,h=(u*e-a*n)/t,p=(u*n+a*e)/t;function d(t,o){return[s*(t*=r)-l*(o*=i)+n,e-l*t-s*o]}return d.invert=function(t,n){return[r*(c*t-f*n+h),i*(p-f*t-c*n)]},d}function za(t){return function(t){var n,e,r,i,o,a,u,s,l,c,f=150,h=480,p=250,d=0,g=0,y=0,v=0,m=0,w=0,_=1,b=1,x=null,$=ho,M=null,A=xo,E=.5;function N(t){return s(t[0]*Mi,t[1]*Mi)}function k(t){return(t=s.invert(t[0],t[1]))&&[t[0]*$i,t[1]*$i]}function S(){var t=Ta(f,0,0,_,b,w).apply(null,n(d,g)),r=Ta(f,h-t[0],p-t[1],_,b,w);return e=Ki(y,v,m),u=Gi(n,r),s=Gi(e,u),a=Sa(u,E),C()}function C(){return l=c=null,N}return N.stream=function(t){return l&&c===t?l:l=Ca(function(t){return Ma({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)($(a(A(c=t)))))},N.preclip=function(t){return arguments.length?($=t,x=void 0,C()):$},N.postclip=function(t){return arguments.length?(A=t,M=r=i=o=null,C()):A},N.clipAngle=function(t){return arguments.length?($=+t?po(x=t*Mi):(x=null,ho),C()):x*$i},N.clipExtent=function(t){return arguments.length?(A=null==t?(M=r=i=o=null,xo):vo(M=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),C()):null==M?null:[[M,r],[i,o]]},N.scale=function(t){return arguments.length?(f=+t,S()):f},N.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],S()):[h,p]},N.center=function(t){return arguments.length?(d=t[0]%360*Mi,g=t[1]%360*Mi,S()):[d*$i,g*$i]},N.rotate=function(t){return arguments.length?(y=t[0]%360*Mi,v=t[1]%360*Mi,m=t.length>2?t[2]%360*Mi:0,S()):[y*$i,v*$i,m*$i]},N.angle=function(t){return arguments.length?(w=t%360*Mi,S()):w*$i},N.reflectX=function(t){return arguments.length?(_=t?-1:1,S()):_<0},N.reflectY=function(t){return arguments.length?(b=t?-1:1,S()):b<0},N.precision=function(t){return arguments.length?(a=Sa(u,E=t*t),C()):Pi(E)},N.fitExtent=function(t,n){return Na(N,t,n)},N.fitSize=function(t,n){return function(t,n,e){return Na(t,[[0,0],n],e)}(N,t,n)},N.fitWidth=function(t,n){return function(t,n,e){return Ea(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])}),e)}(N,t,n)},N.fitHeight=function(t,n){return function(t,n,e){return Ea(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])}),e)}(N,t,n)},function(){return n=t.apply(this,arguments),N.invert=n.invert&&k,S()}}((function(){return t}))()}function Pa(t,n){return[t,Ci(Ri((_i+n)/2))]}function Ra(){return function(t){var n,e,r,i=za(t),o=i.center,a=i.scale,u=i.translate,s=i.clipExtent,l=null;function c(){var o=wi*a(),u=i(function(t){function n(n){return(n=t(n[0]*Mi,n[1]*Mi))[0]*=$i,n[1]*=$i,n}return t=Ki(t[0]*Mi,t[1]*Mi,t.length>2?t[2]*Mi:0),n.invert=function(n){return(n=t.invert(n[0]*Mi,n[1]*Mi))[0]*=$i,n[1]*=$i,n},n}(i.rotate()).invert([0,0]));return s(null==l?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===Pa?[[Math.max(u[0]-o,l),n],[Math.min(u[0]+o,e),r]]:[[l,Math.max(u[1]-o,n)],[e,Math.min(u[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),c()):a()},i.translate=function(t){return arguments.length?(u(t),c()):u()},i.center=function(t){return arguments.length?(o(t),c()):o()},i.clipExtent=function(t){return arguments.length?(null==t?l=n=e=r=null:(l=+t[0][0],n=+t[0][1],e=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,n],[e,r]]},c()}(Pa).scale(961/xi)}function ja(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function Oa(t,n){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof n?this.interpolator(n):this.range(n)}return this}Pa.invert=function(t,n){return[t,2*Ei(Si(n))-_i]};const qa=Symbol("implicit");function La(){var t=new W,n=[],e=[],r=qa;function i(i){let o=t.get(i);if(void 0===o){if(r!==qa)return r;t.set(i,o=n.push(i)-1)}return e[o%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new W;for(const r of e)t.has(r)||t.set(r,n.push(r)-1);return i},i.range=function(t){return arguments.length?(e=Array.from(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return La(n,e).unknown(r)},ja.apply(i,arguments),i}function Da(t){return+t}var Fa=[0,1];function Ha(t){return t}function Ba(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function Xa(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=Ba(i,r),o=e(a,o)):(r=Ba(r,i),o=e(o,a)),function(t){return o(r(t))}}function Ia(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=Ba(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(n){var e=Y(t,n,1,r)-1;return o[e](i[e](n))}}function Va(){var t,n,e,r,i,o,a=Fa,u=Fa,s=Ae,l=Ha;function c(){var t,n,e,s=Math.min(a.length,u.length);return l!==Ha&&(t=a[0],n=a[s-1],t>n&&(e=t,t=n,n=e),l=function(e){return Math.max(t,Math.min(n,e))}),r=s>2?Ia:Xa,i=o=null,f}function f(n){return null==n||isNaN(n=+n)?e:(i||(i=r(a.map(t),u,s)))(t(l(n)))}return f.invert=function(e){return l(n((o||(o=r(u,a.map(t),_e)))(e)))},f.domain=function(t){return arguments.length?(a=Array.from(t,Da),c()):a.slice()},f.range=function(t){return arguments.length?(u=Array.from(t),c()):u.slice()},f.rangeRound=function(t){return u=Array.from(t),s=Ee,c()},f.clamp=function(t){return arguments.length?(l=!!t||Ha,c()):l!==Ha},f.interpolate=function(t){return arguments.length?(s=t,c()):s},f.unknown=function(t){return arguments.length?(e=t,f):e},function(e,r){return t=e,n=r,c()}}function Ya(t,n,e,r){var i,o=function(t,n,e){e=+e;const r=(n=+n)<(t=+t),i=r?et(n,t,e):et(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}(t,n,e);switch((r=ui(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ii(n)/3)))-ii(Math.abs(t)))}(o,a))||(r.precision=i),di(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,ii(n)-ii(t))+1}(o,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-ii(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return pi(r)}function Ua(t){var n=t.domain;return t.ticks=function(t){var e=n();return nt(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return Ya(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,o=n(),a=0,u=o.length-1,s=o[a],l=o[u],c=10;for(l<s&&(i=s,s=l,l=i,i=a,a=u,u=i);c-- >0;){if((i=et(s,l,e))===r)return o[a]=s,o[u]=l,n(o);if(i>0)s=Math.floor(s/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;s=Math.ceil(s*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function Wa(){var t=Va()(Ha,Ha);return t.copy=function(){return n=t,Wa().domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown());var n},ja.apply(t,arguments),Ua(t)}function Za(){var t=Ua(function(){var t,n,e,r,i,o=0,a=1,u=Ha,s=!1;function l(n){return null==n||isNaN(n=+n)?i:u(0===e?.5:(n=(r(n)-t)*e,s?Math.max(0,Math.min(1,n)):n))}function c(t){return function(n){var e,r;return arguments.length?([e,r]=n,u=t(e,r),l):[u(0),u(1)]}}return l.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),n=r(a=+a),e=t===n?0:1/(n-t),l):[o,a]},l.clamp=function(t){return arguments.length?(s=!!t,l):s},l.interpolator=function(t){return arguments.length?(u=t,l):u},l.range=c(Ae),l.rangeRound=c(Ee),l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(o),n=i(a),e=t===n?0:1/(n-t),l}}()(Ha));return t.copy=function(){return n=t,Za().domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown());var n},Oa.apply(t,arguments)}function Ga(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}var Ja=t=>ye(t[t.length-1]),Ka=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ga);Ja(Ka);var Qa=Ja(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ga));function tu(t){return function(){return t}}const nu=Math.abs,eu=Math.atan2,ru=Math.cos,iu=Math.max,ou=Math.min,au=Math.sin,uu=Math.sqrt,su=1e-12,lu=Math.PI,cu=lu/2,fu=2*lu;function hu(t){return t>=1?cu:t<=-1?-cu:Math.asin(t)}function pu(t){return t.innerRadius}function du(t){return t.outerRadius}function gu(t){return t.startAngle}function yu(t){return t.endAngle}function vu(t){return t&&t.padAngle}function mu(t,n,e,r,i,o,a){var u=t-e,s=n-r,l=(a?o:-o)/uu(u*u+s*s),c=l*s,f=-l*u,h=t+c,p=n+f,d=e+c,g=r+f,y=(h+d)/2,v=(p+g)/2,m=d-h,w=g-p,_=m*m+w*w,b=i-o,x=h*g-d*p,$=(w<0?-1:1)*uu(iu(0,b*b*_-x*x)),M=(x*w-m*$)/_,A=(-x*m-w*$)/_,E=(x*w+m*$)/_,N=(-x*m+w*$)/_,k=M-y,S=A-v,C=E-y,T=N-v;return k*k+S*S>C*C+T*T&&(M=E,A=N),{cx:M,cy:A,x01:-c,y01:-f,x11:M*(i/b-1),y11:A*(i/b-1)}}function wu(){var t=pu,n=du,e=tu(0),r=null,i=gu,o=yu,a=vu,u=null,s=function(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(null==e)n=null;else{const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);n=t}return t},()=>new jr(n)}(l);function l(){var l,c,f,h=+t.apply(this,arguments),p=+n.apply(this,arguments),d=i.apply(this,arguments)-cu,g=o.apply(this,arguments)-cu,y=nu(g-d),v=g>d;if(u||(u=l=s()),p<h&&(c=p,p=h,h=c),p>su)if(y>fu-su)u.moveTo(p*ru(d),p*au(d)),u.arc(0,0,p,d,g,!v),h>su&&(u.moveTo(h*ru(g),h*au(g)),u.arc(0,0,h,g,d,v));else{var m,w,_=d,b=g,x=d,$=g,M=y,A=y,E=a.apply(this,arguments)/2,N=E>su&&(r?+r.apply(this,arguments):uu(h*h+p*p)),k=ou(nu(p-h)/2,+e.apply(this,arguments)),S=k,C=k;if(N>su){var T=hu(N/h*au(E)),z=hu(N/p*au(E));(M-=2*T)>su?(x+=T*=v?1:-1,$-=T):(M=0,x=$=(d+g)/2),(A-=2*z)>su?(_+=z*=v?1:-1,b-=z):(A=0,_=b=(d+g)/2)}var P=p*ru(_),R=p*au(_),j=h*ru($),O=h*au($);if(k>su){var q,L=p*ru(b),D=p*au(b),F=h*ru(x),H=h*au(x);if(y<lu)if(q=function(t,n,e,r,i,o,a,u){var s=e-t,l=r-n,c=a-i,f=u-o,h=f*s-c*l;if(!(h*h<su))return[t+(h=(c*(n-o)-f*(t-i))/h)*s,n+h*l]}(P,R,F,H,L,D,j,O)){var B=P-q[0],X=R-q[1],I=L-q[0],V=D-q[1],Y=1/au(((f=(B*I+X*V)/(uu(B*B+X*X)*uu(I*I+V*V)))>1?0:f<-1?lu:Math.acos(f))/2),U=uu(q[0]*q[0]+q[1]*q[1]);S=ou(k,(h-U)/(Y-1)),C=ou(k,(p-U)/(Y+1))}else S=C=0}A>su?C>su?(m=mu(F,H,P,R,p,C,v),w=mu(L,D,j,O,p,C,v),u.moveTo(m.cx+m.x01,m.cy+m.y01),C<k?u.arc(m.cx,m.cy,C,eu(m.y01,m.x01),eu(w.y01,w.x01),!v):(u.arc(m.cx,m.cy,C,eu(m.y01,m.x01),eu(m.y11,m.x11),!v),u.arc(0,0,p,eu(m.cy+m.y11,m.cx+m.x11),eu(w.cy+w.y11,w.cx+w.x11),!v),u.arc(w.cx,w.cy,C,eu(w.y11,w.x11),eu(w.y01,w.x01),!v))):(u.moveTo(P,R),u.arc(0,0,p,_,b,!v)):u.moveTo(P,R),h>su&&M>su?S>su?(m=mu(j,O,L,D,h,-S,v),w=mu(P,R,F,H,h,-S,v),u.lineTo(m.cx+m.x01,m.cy+m.y01),S<k?u.arc(m.cx,m.cy,S,eu(m.y01,m.x01),eu(w.y01,w.x01),!v):(u.arc(m.cx,m.cy,S,eu(m.y01,m.x01),eu(m.y11,m.x11),!v),u.arc(0,0,h,eu(m.cy+m.y11,m.cx+m.x11),eu(w.cy+w.y11,w.cx+w.x11),v),u.arc(w.cx,w.cy,S,eu(w.y11,w.x11),eu(w.y01,w.x01),!v))):u.arc(0,0,h,$,x,v):u.lineTo(j,O)}else u.moveTo(0,0);if(u.closePath(),l)return u=null,l+""||null}return l.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-lu/2;return[ru(r)*e,au(r)*e]},l.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:tu(+n),l):t},l.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:tu(+t),l):n},l.cornerRadius=function(t){return arguments.length?(e="function"==typeof t?t:tu(+t),l):e},l.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:tu(+t),l):r},l.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:tu(+t),l):i},l.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:tu(+t),l):o},l.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:tu(+t),l):a},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l}function _u(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function bu(t){return t}function xu(){var t=bu,n=_u,e=null,r=tu(0),i=tu(fu),o=tu(0);function a(a){var u,s,l,c,f,h,p=(h=a,a="object"==typeof h&&"length"in h?h:Array.from(h)).length,d=0,g=new Array(p),y=new Array(p),v=+r.apply(this,arguments),m=Math.min(fu,Math.max(-fu,i.apply(this,arguments)-v)),w=Math.min(Math.abs(m)/p,o.apply(this,arguments)),_=w*(m<0?-1:1);for(u=0;u<p;++u)(f=y[g[u]=u]=+t(a[u],u,a))>0&&(d+=f);for(null!=n?g.sort((function(t,e){return n(y[t],y[e])})):null!=e&&g.sort((function(t,n){return e(a[t],a[n])})),u=0,l=d?(m-p*_)/d:0;u<p;++u,v=c)s=g[u],c=v+((f=y[s])>0?f*l:0)+_,y[s]={data:a[s],index:u,value:f,startAngle:v,endAngle:c,padAngle:w};return y}return a.value=function(n){return arguments.length?(t="function"==typeof n?n:tu(+n),a):t},a.sortValues=function(t){return arguments.length?(n=t,e=null,a):n},a.sort=function(t){return arguments.length?(e=t,n=null,a):e},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:tu(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:tu(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:tu(+t),a):o},a}function $u(t,n,e){this.k=t,this.x=n,this.y=e}function Mu(t,n,e={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Au(t[0])||!Au(t[1]))throw new Error("coordinates must contain numbers");return function(t,n,e={}){const r={type:"Feature"};return(0===e.id||e.id)&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.properties=n||{},r.geometry=t,r}({type:"Point",coordinates:t},n,e)}function Au(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Eu(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((t=>{if(!Au(t))throw new Error("bbox must only contain numbers")}))}function Nu(t,n,e){if(null!==t)for(var r,i,o,a,u,s,l,c,f=0,h=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,v=0;v<y;v++){u=(c=!!(l=d?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<u;m++){var w=0,_=0;if(null!==(a=c?l.geometries[m]:l)){s=a.coordinates;var b=a.type;switch(f=!e||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===n(s,h,v,w,_))return!1;h++,w++;break;case"LineString":case"MultiPoint":for(r=0;r<s.length;r++){if(!1===n(s[r],h,v,w,_))return!1;h++,"MultiPoint"===b&&w++}"LineString"===b&&w++;break;case"Polygon":case"MultiLineString":for(r=0;r<s.length;r++){for(i=0;i<s[r].length-f;i++){if(!1===n(s[r][i],h,v,w,_))return!1;h++}"MultiLineString"===b&&w++,"Polygon"===b&&_++}"Polygon"===b&&w++;break;case"MultiPolygon":for(r=0;r<s.length;r++){for(_=0,i=0;i<s[r].length;i++){for(o=0;o<s[r][i].length-f;o++){if(!1===n(s[r][i][o],h,v,w,_))return!1;h++}_++}w++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===Nu(a.geometries[r],n,e))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ku(t,n={}){if(null!=t.bbox&&!0!==n.recompute)return t.bbox;const e=[1/0,1/0,-1/0,-1/0];return Nu(t,(t=>{e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function Su(t,n){var e,r,i,o,a,u,s,l,c,f=0,h=t[0],p=t[1],d=n.length;for(e=0;e<d;e++){r=0;var g=n[e],y=g.length-1;if((l=g[0])[0]!==g[y][0]&&l[1]!==g[y][1])throw new Error("First and last coordinates in a ring must be the same");for(o=l[0]-h,a=l[1]-p;r<y;r++){if(u=(c=g[r+1])[0]-h,s=c[1]-p,0===a&&0===s){if(u<=0&&o>=0||o<=0&&u>=0)return 0}else if(s>=0&&a<=0||s<=0&&a>=0){if(0===(i=Ir(o,u,a,s,0,0)))return 0;(i>0&&s>0&&a<=0||i<0&&s<=0&&a>0)&&f++}l=c,a=s,o=u}}return f%2!=0}function Cu(t,n,e={}){if(!t)throw new Error("point is required");if(!n)throw new Error("polygon is required");const r=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return[...t.geometry.coordinates];if("Point"===t.type)return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),i="Feature"===(o=n).type?o.geometry:o;var o;const a=i.type,u=n.bbox;let s=i.coordinates;if(u&&!1===function(t,n){return n[0]<=t[0]&&n[1]<=t[1]&&n[2]>=t[0]&&n[3]>=t[1]}(r,u))return!1;"Polygon"===a&&(s=[s]);let l=!1;for(var c=0;c<s.length;++c){const t=Su(r,s[c]);if(0===t)return!e.ignoreBoundary;t&&(l=!0)}return l}function Tu(t){return Array.isArray(t)?Ru(t):t&&t.bbox?Ru(t.bbox):[360*Pu(),180*Pu()]}function zu(t,n={}){!function(t){null!=t&&(Array.isArray(t)?Eu(t):null!=t.bbox&&Eu(t.bbox))}(n.bbox),null==t&&(t=1);const e=[];for(let r=0;r<t;r++)e.push(Mu(Tu(n.bbox)));return function(t,n={}){const e={type:"FeatureCollection"};return n.id&&(e.id=n.id),n.bbox&&(e.bbox=n.bbox),e.features=t,e}(e)}function Pu(){return Math.random()-.5}function Ru(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}function ju(n){let e,i,o,d,g,y,v,m,w;return{c(){var t;e=l("div"),t="svg",i=document.createElementNS("http://www.w3.org/2000/svg",t),o=c(),d=l("div"),d.textContent="Learn More About Viz",g=c(),y=l("div"),v=l("div"),v.innerHTML='<h2 class="svelte-1syp92z">Explore Boston&#39;s Neighborhoods</h2> \n      <p class="svelte-1syp92z"><strong class="svelte-1syp92z">Interactive Map:</strong> Click on a neighborhood to zoom in and explore its details. Click again to zoom out.</p> \n      <p class="svelte-1syp92z"><strong class="svelte-1syp92z">Color Coding:</strong> Each neighborhood is shaded based on its <span class="highlight svelte-1syp92z">vacancy rate</span>, with darker shades indicating higher rates of vacant buildings.</p> \n      <p class="svelte-1syp92z"><strong class="svelte-1syp92z">Where There is Darkness, There is Light:</strong> Discover the percentage of buildings converted to condos and, of those, what percent were homes. The <span class="highlight svelte-1syp92z">color of the shadows</span> beneath each building indicates if the condo condversion was a home or not. All the non-colored shadows indicate buildings that were not converted whatsoever. The quantity of all these shadow types are proportionally accurate to the selected neighborhood.</p>  \n      <p class="svelte-1syp92z"><strong class="svelte-1syp92z">Dynamic Across Scales:</strong>  The <span class="highlight svelte-1syp92z">pie chart</span> and <span class="highlight svelte-1syp92z">bar chart</span> on the right update dynamically to reflect the selected neighborhood. Hover over the bar chart to see exact percentages for each ethnicity. When zoomed out, the pie chart and bar chart will show their average values of across all neighborhoods.</p> \n      <p class="svelte-1syp92z"><strong class="svelte-1syp92z">Data Source:</strong> This visualization is powered by <em class="svelte-1syp92z">Analyze Boston&#39;s</em> property assessment tables and 2022 parcel data. The dataset spans condo conversions in Boston from <span class="highlight svelte-1syp92z">2015 to 2024</span>, which can be identified by changes in address entries over time. The property assessment records of the City of Boston from 2004-2024, were used  for the vacany rates.</p>',h(i,"viewBox",`0 0 ${Ou} ${qu}`),h(i,"class","svelte-1syp92z"),h(d,"class","learn-more-box svelte-1syp92z"),h(v,"class","overlay-content svelte-1syp92z"),h(y,"class","data-overlay svelte-1syp92z"),p(y,"opacity",n[1]?1:0),p(y,"pointer-events",n[1]?"auto":"none"),p(e,"display","flex"),p(e,"justify-content","center"),p(e,"align-items","flex-start"),p(e,"position","relative")},m(t,r){u(t,e,r),a(e,i),n[2](i),a(e,o),a(e,d),a(e,g),a(e,y),a(y,v),m||(w=[f(d,"mouseover",n[3]),f(d,"mouseout",n[4])],m=!0)},p(t,n){2&n[0]&&p(y,"opacity",t[1]?1:0),2&n[0]&&p(y,"pointer-events",t[1]?"auto":"none")},i:t,o:t,d(t){t&&s(e),n[2](null),m=!1,r(w)}}}$u.prototype={constructor:$u,scale:function(t){return 1===t?this:new $u(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new $u(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},$u.prototype;const Ou=960,qu=600;function Lu(t,n,e){let r,i,o,a,u,s,l={},c={},f={},h={},p=null,d=null,g=!1;const y=w();function m(){return Ra().scale(14e4).center([-71.0589,42.3101]).translate([Ou/2,qu/2])}let _=m(),x=$a().projection(_);async function $(){try{o=await function(t,n){return fetch(t,n).then(ei)}("data/neighborhoods.geojson"),a=o.features;(await ni("data/Just Neighborhood Details.csv")).forEach((t=>{const n=t.Neighborhood.trim();l[n]=+t["Vacant Rate"];const e=100*+t["% of Condoconversions that TWO-FAM DWELL"],r=100*+t["% of Condoconversions that THREE-FAM DWELL"];c[n]={converted:e+r,others:100-(e+r)},f[n]=+t["Bipoc Rate"]}));(await ni("data/Neighborhood Zipcode Most Details.csv")).forEach((t=>{const n=t.Neighborhood.trim();h[n]=100*parseFloat(t["Simple Condo Conversion %"])}));const t=Array.from(new Set(a.map((t=>(t.properties.Neighborhood||t.properties.neighborhood||t.properties.name||"").trim())).filter((t=>t)))),n=t.map((t=>l[t])).filter((t=>null!=t));s=function(t,n){let e,r;if(void 0===n)for(const n of t)null!=n&&(void 0===e?n>=n&&(e=r=n):(e>n&&(e=n),r<n&&(r=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}(n),u=Za(Qa).domain(s);let e=0,r=0,v=0,m=0;t.forEach((t=>{c[t]&&(e+=c[t].converted,r+=c[t].others,m++),null!=f[t]&&(v+=f[t])}));p={converted:m?e/m:0,others:m?r/m:0},d=m?v/m:0,y("selectNeighborhood",{name:"Average",details:p,bipocRate:d}),function(){i.selectAll("*").remove();const t=i.append("g").attr("class","map-view").style("opacity",1);t.selectAll("path.neighborhood").data(a).enter().append("path").attr("class","neighborhood").attr("d",x).attr("fill",(t=>{const n=(t.properties.Neighborhood||t.properties.neighborhood||t.properties.name||"").trim();return null!=l[n]?u(l[n]):"#ccc"})).attr("stroke","#333").style("cursor","pointer").on("mouseover",((t,n)=>M(t,n,t.currentTarget))).on("mouseout",((t,n)=>A(t,n,t.currentTarget))).on("click",((n,e)=>{const r=(e.properties.Neighborhood||e.properties.neighborhood||e.properties.name||"").trim();g||(g=!0,y("selectNeighborhood",{name:r,details:c[r],bipocRate:f[r]}),k(e),t.transition().duration(600).style("opacity",0).on("end",(()=>{t.remove(),C(e)})))})),t.selectAll("g.icon-group").data(a).enter().append("g").attr("class","icon-group").each((function(t){const n=(t.properties.Neighborhood||t.properties.neighborhood||t.properties.name||"").trim(),e=null!=l[n]?l[n]:0;let r=function(t,n){const e=[],r=ku(t);let i=0;for(;e.length<n&&i<100;){const n=zu(1,{bbox:r}).features[0];Cu(n,t)&&e.push(n.geometry.coordinates),i++}return e}(t,Math.max(Math.ceil(10*e),1));0===r.length&&(r=[x.centroid(t)]),Cn(this).selectAll("circle.icon").data(r).enter().append("circle").attr("class","icon").attr("cx",(t=>t[0])).attr("cy",(t=>t[1])).attr("r",4).style("fill","blue").style("stroke","#fff").style("stroke-width","1px").on("mouseover",(function(){Cn(this).transition().duration(100).attr("r",8)})).on("mouseout",(function(){Cn(this).transition().duration(100).attr("r",4)}))})),S()}()}catch(t){console.error("Error loading data:",t)}}function M(t,n,e){Cn(e).attr("fill",Zn(Cn(e).attr("fill")).darker(.2));const r=(n.properties.Neighborhood||n.properties.neighborhood||n.properties.name||"").trim(),o=x.centroid(n);i.append("text").attr("class","neighborhood-label").attr("x",o[0]).attr("y",o[1]).attr("text-anchor","middle").attr("dominant-baseline","middle").style("fill","#000").style("font-size","14px").style("font-weight","bold").style("pointer-events","none").style("opacity",0).text(r).transition().duration(200).style("opacity",1)}function A(t,n,e){i.selectAll("text.neighborhood-label").remove();const r=(n.properties.Neighborhood||n.properties.neighborhood||n.properties.name||"").trim();Cn(e).attr("fill",null!=l[r]?u(l[r]):"#ccc")}function E(t){i.selectAll("g.clouds").transition().duration(800).style("opacity",t)}function N(t){const n=i.select("#map-legend");n.empty()||n.transition().duration(800).style("opacity",t)}function k(t){const n=Mr().duration(800);_.fitExtent([[20,20],[Ou-20,qu-20]],t),x=$a().projection(_),i.selectAll("path.neighborhood").transition(n).attr("d",x),E(0),N(0),Cn(".learn-more-box").transition().duration(800).style("opacity",0)}function S(){Cn("#map-legend").remove();const t=200;let n=i.select("defs");n.empty()&&(n=i.append("defs"));const e=n.append("linearGradient").attr("id","legend-gradient"),r=nt(s[0],s[1],10);e.selectAll("stop").data(r).enter().append("stop").attr("offset",(t=>(t-s[0])/(s[1]-s[0])*100+"%")).attr("stop-color",(t=>u(t)));const o=i.append("g").attr("id","map-legend").attr("transform",`translate(${Ou-t-30}, ${qu-40})`).style("opacity",0);o.append("rect").attr("width",t).attr("height",10).style("fill","url(#legend-gradient)");const a=Wa().domain(s).range([0,t]),l=(c=a,ft(3,c)).ticks(5).tickFormat(pi(".0%"));var c;o.append("g").attr("transform","translate(0, 10)").call(l).select(".domain").remove(),o.append("text").attr("x",100).attr("y",-5).attr("text-anchor","middle").style("font-size","12px").style("fill","#333").text("Vacancy Percentage"),o.transition().duration(800).style("opacity",1)}function C(t){i.selectAll("*").remove();const n=(t.properties.Neighborhood||t.properties.neighborhood||t.properties.name||"").trim(),e=null!=h[n]?h[n]:c[n]?.converted||0,r=x.bounds(t),o=r[0][0],s=r[0][1],v=r[1][0],w=r[1][1],b=i.append("g").attr("class","detail-placeholder").attr("transform","translate(0,30) scale(0.9)");b.append("path").attr("d",x(t)).attr("fill","none").attr("stroke","#333"),b.append("text").attr("x",(o+v)/2).attr("y",s-10).attr("text-anchor","middle").style("font-size","24px").style("fill","#000").text(0===e?"Not Enough Data For This Region":`${n}: ${e}% of Buildings Now Condos`);const $=r[0][0],z=r[0][1],P=r[1][0],R=r[1][1],j=e,O=Math.round(j/100*100),q=e,L=Math.round(q/100*100),D=Math.round(L*(j/100)),F=L-D;let H=0,B=0;for(let n=0;n<100;n++){let e,r;do{e=Math.random()*(P-$)+$,r=Math.random()*(R-z)+z}while(X=e,I=r,!Cu({type:"Point",coordinates:_.invert([X,I])},t));H<D&&n<O?(b.append("ellipse").attr("cx",e).attr("cy",r+10).attr("rx",20).attr("ry",12).attr("fill","#ff7f0e").attr("opacity",.3),H++):B<F&&n>=O?(b.append("ellipse").attr("cx",e).attr("cy",r+10).attr("rx",20).attr("ry",12).attr("fill","#1f77b4").attr("opacity",.3),B++):b.append("ellipse").attr("cx",e).attr("cy",r+10).attr("rx",15).attr("ry",8).attr("fill","#aaa").attr("opacity",.2),b.append("image").attr("class","center-icon").attr("href","data/home_icon2.gif").attr("width",70).attr("height",70).attr("x",e-35).attr("y",r-35).on("mouseover",(function(){Cn(this).transition().duration(200).attr("width",90).attr("height",90).attr("x",e-45).attr("y",r-45)})).on("mouseout",(function(){Cn(this).transition().duration(200).attr("width",70).attr("height",70).attr("x",e-35).attr("y",r-35)}))}var X,I;b.transition().duration(600).style("opacity",1),b.style("cursor","pointer").on("click",(()=>{const t=(o+v)/2,n=(s+w)/2+30;b.transition().duration(600).attr("transform",`translate(${t}, ${n}) scale(0)`).on("end",(()=>{!function(){const t=Mr().duration(800);_=m(),x=$a().projection(_),i.selectAll("path.neighborhood").transition(t).attr("d",x),E(1),N(1),Cn(".learn-more-box").transition().duration(800).style("opacity",1),S()}(),g=!1,function(){i.selectAll("*").remove();const t=i.append("g").attr("class","map-view").style("opacity",0);t.selectAll("path.neighborhood").data(a).enter().append("path").attr("class","neighborhood").attr("d",x).attr("fill",(t=>{const n=(t.properties.Neighborhood||t.properties.neighborhood||t.properties.name||"").trim();return null!=l[n]?u(l[n]):"#ccc"})).attr("stroke","#333").style("cursor","pointer").on("mouseover",((t,n)=>M(0,n,t.currentTarget))).on("mouseout",((t,n)=>A(0,n,t.currentTarget))).on("click",((n,e)=>{const r=(e.properties.Neighborhood||e.properties.neighborhood||e.properties.name||"").trim();g||(g=!0,i.selectAll("g.clouds").remove(),y("selectNeighborhood",{name:r,details:c[r],bipocRate:f[r]}),k(e),t.transition().duration(600).style("opacity",0).on("end",(()=>{t.remove(),C(e)})))})),T(),S(),t.transition().duration(600).style("opacity",1)}(),y("selectNeighborhood",{name:"Average",details:p,bipocRate:d})}))}))}function T(){const t=i.append("g").attr("class","clouds").style("opacity",1);i.append("defs").append("filter").attr("id","cloud-shadow").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%").append("feDropShadow").attr("dx",-60).attr("dy",20).attr("stdDeviation",5).attr("flood-color","#000").attr("flood-opacity",.3);const n=t.selectAll("image.cloud").data([{x:-200,y:50,width:150,height:80,src:"data/clouds/cloud1.png",speed:20},{x:300,y:100,width:200,height:100,src:"data/clouds/cloud2.png",speed:23},{x:-400,y:225,width:220,height:110,src:"data/clouds/cloud4.png",speed:30},{x:600,y:350,width:180,height:90,src:"data/clouds/cloud3.png",speed:33}]).enter().append("image").attr("class","cloud").attr("x",(t=>t.x)).attr("y",(t=>t.y)).attr("width",(t=>t.width)).attr("height",(t=>t.height)).attr("href",(t=>t.src)).style("opacity",.76).style("filter","url(#cloud-shadow)").style("pointer-events","all").on("mouseover",(function(){Cn(this).style("opacity",.5)})).on("mouseout",(function(){Cn(this).style("opacity",.76)}));function e(t){const n=t.width,r=Ou;Cn(this).transition().duration((()=>(r+n+60)/t.speed*1e3)).ease(Nr).attr("x",r+60).on("end",(function(){Cn(this).attr("x",-n).style("opacity",.76),e.call(this,t)}))}n.each((function(t){const n=100*Math.random();setTimeout((()=>e.call(this,t)),n)})),setInterval((function(){n.each((function(t){const n=Cn(this),e=this.getBoundingClientRect();i.selectAll("path.neighborhood").nodes().some((t=>{const n=t.getBoundingClientRect();return e.left<n.right&&e.right>n.left&&e.top<n.bottom&&e.bottom>n.top}))?n.style("pointer-events","none"):n.style("pointer-events","all")}))}),100)}v((async()=>{i=Cn(r).attr("width",Ou).attr("height",qu);i.append("defs").append("filter").attr("id","cloud-shadow").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%").append("feDropShadow").attr("dx",5).attr("dy",5).attr("stdDeviation",10).attr("flood-color","#000").attr("flood-opacity",.2),await $(),T()}));let z=!1;return[r,z,function(t){b[t?"unshift":"push"]((()=>{r=t,e(0,r)}))},()=>e(1,z=!0),()=>e(1,z=!1)]}let Du=class extends F{constructor(t){super(),D(this,t,Lu,ju,o,{},null,[-1,-1])}};function Fu(n){let e,r,i,o;return{c(){e=l("div"),r=l("h4"),r.textContent="Percent of Conversions That Were Homes",i=c(),o=l("div"),h(r,"class","svelte-f6cf56"),h(e,"class","pie-chart-container svelte-f6cf56")},m(t,s){u(t,e,s),a(e,r),a(e,i),a(e,o),n[2](o)},p:t,i:t,o:t,d(t){t&&s(e),n[2](null)}}}const Hu=450,Bu=350;function Xu(t,n,e){let r,{details:i}=n;const o=Math.min(Hu,Bu)/2,a=[{label:"Homes",color:"#1f77b4"},{label:"Others",color:"#ff7f0e"}];function u(){const t=[{label:"Converted Dwellings",value:i.converted},{label:"Others",value:i.others}];let n=Cn(r).select("svg.pie-chart");n=n.empty()?Cn(r).append("svg").attr("class","pie-chart").attr("width",Hu).attr("height",Bu).append("g").attr("transform","translate(225, 175)"):n.select("g")||Cn(r).select("svg.pie-chart").append("g").attr("transform","translate(225, 175)");const e=xu().sort(null).value((t=>t.value)),u=wu().innerRadius(.4*o).outerRadius(o-5).cornerRadius(5).padAngle(.02),s=La().domain(["Homes","Others"]).range(["#1f77b4","#ff7f0e"]),l=n.selectAll(".arc").data(e(t),(t=>t.data.label));l.exit().remove();const c=l.enter().append("g").attr("class","arc");c.append("path").each((function(t){this._current=t})).attr("d",u).attr("fill",(t=>s(t.data.label))).attr("fill-opacity",.7).attr("stroke","#fff").attr("stroke-width",1),c.append("text").attr("transform",(t=>`translate(${u.centroid(t)})`)).attr("text-anchor","middle").attr("dy","0.35em").each((function(t){this._current=t})).text((t=>`${Math.round(t.data.value)}%`)).style("font-size","16px").style("font-weight","bold").style("fill","#000");const f=c.merge(l);f.select("path").transition().duration(800).attrTween("d",(function(t){const n=Ae(this._current,t);return this._current=n(0),t=>u(n(t))})).attr("fill",(t=>s(t.data.label))).attr("fill-opacity",.7).attr("stroke",(t=>s(t.data.label))).attr("stroke-width",5),f.select("text").transition().duration(800).attr("transform",(t=>`translate(${u.centroid(t)})`)).text((t=>`${Math.round(t.data.value)}%`)).style("font-size","16px").style("font-weight","bold").style("fill","#000"),function(){Cn(r).select("svg.legend").remove();const t=200,n=50*a.length,e=Cn(r).append("svg").attr("class","legend").attr("width",t).attr("height",n).style("position","relative").style("left","-80px").selectAll(".legend-item").data(a).enter().append("g").attr("class","legend-item").attr("transform",((t,n)=>`translate(0, ${20*n})`));e.append("rect").attr("x",10).attr("y",10).attr("width",15).attr("height",15).attr("fill",(t=>t.color)),e.append("text").attr("x",35).attr("y",22).text((t=>t.label)).style("font-size","12px").style("fill","#333")}()}return v(u),m(u),t.$$set=t=>{"details"in t&&e(1,i=t.details)},[r,i,function(t){b[t?"unshift":"push"]((()=>{r=t,e(0,r)}))}]}class Iu extends F{constructor(t){super(),D(this,t,Xu,Fu,o,{details:1})}}function Vu(n){let e;return{c(){e=l("div"),h(e,"id","race-bar"),h(e,"class","race-bar-container svelte-73f1zy")},m(t,n){u(t,e,n)},p:t,i:t,o:t,d(t){t&&s(e)}}}const Yu=438;function Uu(t,n,e){let{selectedNeighborhoodName:r=""}=n,i=[],o=null;const a=["Hisp Rate","Asian Rate","Black Rate","White Rate","Other and Two All Rate"],u=La().domain(a).range(Ka[a.length]).unknown("#ccc");function s(){const t=i.find((t=>t.Neighborhood.trim()===r));o=t?Object.fromEntries(a.map((n=>[n,+t[n]]))):function(t){const n={};return a.forEach((e=>n[e]=function(t,n){let e=0,r=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(++e,r+=n);else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(o=+o)>=o&&(++e,r+=o)}if(e)return r/e}(t,(t=>+t[e])))),n}(i)}function l(){if(!i.length)return;s();let t=0;const n=a.map((n=>{const e=o[n],r=t;return t+=e,{category:n,value:e,start:r,end:t}})),e=n.reduce(((t,n)=>n.value>t.value?n:t),n[0]);let r=Cn("#race-bar").select("svg.chart");r.empty()&&(r=Cn("#race-bar").append("svg").attr("class","chart").attr("width",Yu).attr("height",30));const l=r.selectAll("g.segment").data(n,(t=>t.category)),c=l.enter().append("g").attr("class","segment");c.append("rect").attr("x",(t=>t.start*Yu)).attr("y",0).attr("width",0).attr("height",30).attr("fill",(t=>u(t.category))).transition().duration(800).attr("width",(t=>t.value*Yu)).attr("x",(t=>t.start*Yu)),c.append("text").attr("x",(t=>(t.start+t.value/2)*Yu)).attr("y",15).attr("text-anchor","middle").attr("dominant-baseline","middle").text((t=>t===e?`${Math.round(100*t.value)}%`:"")).style("opacity",(t=>t===e?1:0)).style("fill","#000").style("font-size",(t=>t===e?"12px":"10px")).style("font-weight",(t=>t===e?"bold":"normal"));const f=c.merge(l);f.select("rect").transition().duration(800).attr("x",(t=>t.start*Yu)).attr("width",(t=>t.value*Yu)).attr("fill",(t=>u(t.category))),f.select("text").transition().duration(800).attr("x",(t=>(t.start+t.value/2)*Yu)).text((t=>t===e?`${Math.round(100*t.value)}%`:"")).style("opacity",(t=>t===e?1:0)).style("fill","#000").style("font-size",(t=>t===e?"12px":"10px")).style("font-weight",(t=>t===e?"bold":"normal")),f.on("mouseover",(function(t,n){Cn(this).select("rect").transition().duration(200).attr("x",(t=>t.start*Yu-2)).attr("width",(t=>t.value*Yu+4)).attr("y",-6).attr("height",42),Cn(this).select("text").transition().duration(200).style("opacity",1).style("fill","#000").style("font-size","16px").style("font-weight","bold").text(`${Math.round(100*n.value)}%`)})).on("mouseout",(function(t,n){Cn(this).select("rect").transition().duration(200).attr("x",(t=>t.start*Yu)).attr("width",(t=>t.value*Yu)).attr("y",0).attr("height",30),Cn(this).select("text").transition().duration(200).style("opacity",n===e?1:0).style("fill","#000").style("font-size","10px").style("font-weight","normal").text(n===e?`${Math.round(100*n.value)}%`:"")})),l.exit().remove(),function(){Cn("#race-bar").select("svg.legend").remove();const t=40,n=Cn("#race-bar").append("svg").attr("class","legend").attr("width",Yu).attr("height",t).style("display","block").style("margin-top","5px"),e=Yu/a.length,r=["Hisp. ","Asian","Black","White","Other"],i=n.selectAll("g.legend-item").data(a).enter().append("g").attr("class","legend-item").attr("transform",((t,n)=>`translate(${n*e},0)`));i.append("rect").attr("x",-1).attr("y",-1).attr("width",20).attr("height",20).attr("fill",(t=>u(t))),i.append("text").attr("x",22).attr("y",16).text(((t,n)=>r[n])).style("font-size","14px").style("fill","#333").style("font-weight","normal")}()}return v((async()=>{i=await ni("data/NeighborhoodsAndRaces.csv"),l()})),m(l),t.$$set=t=>{"selectedNeighborhoodName"in t&&e(0,r=t.selectedNeighborhoodName)},[r]}class Wu extends F{constructor(t){super(),D(this,t,Uu,Vu,o,{selectedNeighborhoodName:0})}}function Zu(t){let n,e;return n=new Iu({props:{details:t[0]}}),{c(){j(n.$$.fragment)},m(t,r){O(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.details=t[0]),n.$set(r)},i(t){e||(P(n.$$.fragment,t),e=!0)},o(t){R(n.$$.fragment,t),e=!1},d(t){q(n,t)}}}function Gu(t){let n,e,i,o,f,d,g,y,v,m;f=new Du({}),f.$on("selectNeighborhood",t[2]),f.$on("resetNeighborhood",t[3]);let w=t[0]&&Zu(t);return v=new Wu({props:{selectedNeighborhoodName:t[1]}}),{c(){n=l("header"),n.innerHTML="<h1>Boston Condo Conversion Map</h1>",e=c(),i=l("div"),o=l("div"),j(f.$$.fragment),d=c(),g=l("div"),w&&w.c(),y=c(),j(v.$$.fragment),p(n,"text-align","center"),p(n,"padding","20px"),p(g,"margin-left","20px"),p(g,"display","flex"),p(g,"flex-direction","column"),p(g,"align-items","center"),p(o,"display","flex"),p(o,"justify-content","center"),p(o,"align-items","flex-start"),h(i,"class","dashboard-container svelte-1kpo3w1")},m(t,r){u(t,n,r),u(t,e,r),u(t,i,r),a(i,o),O(f,o,null),a(o,d),a(o,g),w&&w.m(g,null),a(g,y),O(v,g,null),m=!0},p(t,[n]){t[0]?w?(w.p(t,n),1&n&&P(w,1)):(w=Zu(t),w.c(),P(w,1),w.m(g,y)):w&&(z={r:0,c:[],p:z},R(w,1,1,(()=>{w=null})),z.r||r(z.c),z=z.p);const e={};2&n&&(e.selectedNeighborhoodName=t[1]),v.$set(e)},i(t){m||(P(f.$$.fragment,t),P(w),P(v.$$.fragment,t),m=!0)},o(t){R(f.$$.fragment,t),R(w),R(v.$$.fragment,t),m=!1},d(t){t&&s(n),t&&s(e),t&&s(i),q(f),w&&w.d(),q(v)}}}function Ju(t,n,e){let r=null,i="";return[r,i,function(t){e(0,r=t.detail.details),e(1,i=t.detail.name)},function(){e(0,r=null),e(1,i="")}]}class Ku extends F{constructor(t){super(),D(this,t,Ju,Gu,o,{})}}function Qu(n){let e,r;return e=new Ku({}),{c(){j(e.$$.fragment)},m(t,n){O(e,t,n),r=!0},p:t,i(t){r||(P(e.$$.fragment,t),r=!0)},o(t){R(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}return new class extends F{constructor(t){super(),D(this,t,null,Qu,o,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
